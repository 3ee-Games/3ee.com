import{S as te,i as se,s as ae,e as y,c as E,a as b,d as h,b as M,g as N,t as v,k as D,h as g,m as T,X,G as c,H as F,V as J,I as K,j as O,O as le,Q as ne,l as W,E as Q,P as oe,v as re,w as ie,a0 as ce,x as ue,y as fe,q as he,o as pe,B as _e}from"../../../chunks/index-2a82a4a8.js";import{g as me}from"../../../chunks/navigation-0e6511d1.js";import{g as de}from"../../../chunks/config-201c2df4.js";import{a as ve}from"../../../chunks/accountStore-3492c591.js";import{s as ge}from"../../../chunks/messagingStore-7daf7769.js";import"../../../chunks/singletons-d1fb5791.js";import"../../../chunks/index-16dda89e.js";function Y(s,e,o){const t=s.slice();return t[8]=e[o],t}function ye(s){let e,o,t,a,i,l,_,p,r=s[2]!==1?"s":"",n,u,d,k,S,$=s[1]!==1?"s":"",A,q,j,C,w,H,U,P;return{c(){e=y("p"),o=v("Hail, "),t=y("span"),a=v(s[3]),i=v(`, you have
		`),l=y("span"),_=v(s[2]),p=v(`
		new message`),n=v(r),u=v(` and
		`),d=y("span"),k=v(s[1]),S=v(`
		message`),A=v($),q=v(" that we are processing."),j=D(),C=y("p"),w=v("Need help? "),H=y("a"),U=v("Contact us"),P=v(" anytime!"),this.h()},l(f){e=E(f,"P",{});var m=b(e);o=g(m,"Hail, "),t=E(m,"SPAN",{class:!0});var G=b(t);a=g(G,s[3]),G.forEach(h),i=g(m,`, you have
		`),l=E(m,"SPAN",{class:!0});var I=b(l);_=g(I,s[2]),I.forEach(h),p=g(m,`
		new message`),n=g(m,r),u=g(m,` and
		`),d=E(m,"SPAN",{class:!0});var L=b(d);k=g(L,s[1]),L.forEach(h),S=g(m,`
		message`),A=g(m,$),q=g(m," that we are processing."),m.forEach(h),j=T(f),C=E(f,"P",{});var z=b(C);w=g(z,"Need help? "),H=E(z,"A",{href:!0});var V=b(H);U=g(V,"Contact us"),V.forEach(h),P=g(z," anytime!"),z.forEach(h),this.h()},h(){M(t,"class","highlight accent"),M(l,"class","highlight"),M(d,"class","highlight"),M(H,"href","/contact/")},m(f,m){N(f,e,m),c(e,o),c(e,t),c(t,a),c(e,i),c(e,l),c(l,_),c(e,p),c(e,n),c(e,u),c(e,d),c(d,k),c(e,S),c(e,A),c(e,q),N(f,j,m),N(f,C,m),c(C,w),c(C,H),c(H,U),c(C,P)},p(f,m){m&4&&O(_,f[2]),m&4&&r!==(r=f[2]!==1?"s":"")&&O(n,r),m&2&&O(k,f[1]),m&2&&$!==($=f[1]!==1?"s":"")&&O(A,$)},d(f){f&&h(e),f&&h(j),f&&h(C)}}}function Ee(s){let e,o,t,a,i,l,_,p,r,n,u;return{c(){e=y("p"),o=v("Hello, "),t=y("span"),a=v(s[3]),i=v(", you have no messages."),l=D(),_=y("p"),p=v("Need help? "),r=y("a"),n=v("Contact us"),u=v(" anytime!"),this.h()},l(d){e=E(d,"P",{});var k=b(e);o=g(k,"Hello, "),t=E(k,"SPAN",{class:!0});var S=b(t);a=g(S,s[3]),S.forEach(h),i=g(k,", you have no messages."),k.forEach(h),l=T(d),_=E(d,"P",{});var $=b(_);p=g($,"Need help? "),r=E($,"A",{href:!0});var A=b(r);n=g(A,"Contact us"),A.forEach(h),u=g($," anytime!"),$.forEach(h),this.h()},h(){M(t,"class","highlight accent"),M(r,"href","/contact/")},m(d,k){N(d,e,k),c(e,o),c(e,t),c(t,a),c(e,i),N(d,l,k),N(d,_,k),c(_,p),c(_,r),c(r,n),c(_,u)},p:Q,d(d){d&&h(e),d&&h(l),d&&h(_)}}}function Z(s){let e,o=s[0],t=[];for(let a=0;a<o.length;a+=1)t[a]=x(Y(s,o,a));return{c(){e=y("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=E(a,"UL",{class:!0});var i=b(e);for(let l=0;l<t.length;l+=1)t[l].l(i);i.forEach(h),this.h()},h(){M(e,"class","svelte-1tivc51")},m(a,i){N(a,e,i);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(a,i){if(i&17){o=a[0];let l;for(l=0;l<o.length;l+=1){const _=Y(a,o,l);t[l]?t[l].p(_,i):(t[l]=x(_),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=o.length}},d(a){a&&h(e),ne(t,a)}}}function R(s){let e,o;return{c(){e=y("h3"),o=v("New!"),this.h()},l(t){e=E(t,"H3",{class:!0});var a=b(e);o=g(a,"New!"),a.forEach(h),this.h()},h(){M(e,"class","unread svelte-1tivc51")},m(t,a){N(t,e,a),c(e,o)},d(t){t&&h(e)}}}function x(s){var H,U;let e,o,t,a=s[8].subject+"",i,l,_,p,r,n=B((U=(H=s[8])==null?void 0:H.status)==null?void 0:U.status_type)+"",u,d,k,S,$=ee(s[8].updated)+"",A,q,j,C,w=!s[8].read&&s[8].status.status_type===1&&R();return{c(){e=y("li"),o=y("h3"),t=y("a"),i=v(a),_=D(),w&&w.c(),p=D(),r=y("h3"),u=v(n),k=D(),S=y("p"),A=v($),q=D(),this.h()},l(P){e=E(P,"LI",{class:!0});var f=b(e);o=E(f,"H3",{class:!0});var m=b(o);t=E(m,"A",{href:!0});var G=b(t);i=g(G,a),G.forEach(h),m.forEach(h),_=T(f),w&&w.l(f),p=T(f),r=E(f,"H3",{class:!0});var I=b(r);u=g(I,n),I.forEach(h),k=T(f),S=E(f,"P",{class:!0});var L=b(S);A=g(L,$),L.forEach(h),q=T(f),f.forEach(h),this.h()},h(){var P,f;M(t,"href",l=""),M(o,"class","svelte-1tivc51"),M(r,"class",d=X(B((f=(P=s[8])==null?void 0:P.status)==null?void 0:f.status_type))+" svelte-1tivc51"),M(S,"class","publish-date svelte-1tivc51"),M(e,"class","svelte-1tivc51")},m(P,f){N(P,e,f),c(e,o),c(o,t),c(t,i),c(e,_),w&&w.m(e,null),c(e,p),c(e,r),c(r,u),c(e,k),c(e,S),c(S,A),c(e,q),j||(C=[F(t,"click",J(function(){K(s[4](s[8]))&&s[4](s[8]).apply(this,arguments)})),F(e,"click",J(function(){K(s[4](s[8]))&&s[4](s[8]).apply(this,arguments)}))],j=!0)},p(P,f){var m,G,I,L;s=P,f&1&&a!==(a=s[8].subject+"")&&O(i,a),!s[8].read&&s[8].status.status_type===1?w||(w=R(),w.c(),w.m(e,p)):w&&(w.d(1),w=null),f&1&&n!==(n=B((G=(m=s[8])==null?void 0:m.status)==null?void 0:G.status_type)+"")&&O(u,n),f&1&&d!==(d=X(B((L=(I=s[8])==null?void 0:I.status)==null?void 0:L.status_type))+" svelte-1tivc51")&&M(r,"class",d),f&1&&$!==($=ee(s[8].updated)+"")&&O(A,$)},d(P){P&&h(e),w&&w.d(),j=!1,le(C)}}}function be(s){let e,o,t,a,i;function l(n,u){return typeof n[0]=="undefined"||n[0].length===0?Ee:ye}let _=l(s),p=_(s),r=s[0].length>0&&Z(s);return{c(){e=y("h1"),o=v("Messages"),t=D(),p.c(),a=D(),r&&r.c(),i=W()},l(n){e=E(n,"H1",{});var u=b(e);o=g(u,"Messages"),u.forEach(h),t=T(n),p.l(n),a=T(n),r&&r.l(n),i=W()},m(n,u){N(n,e,u),c(e,o),N(n,t,u),p.m(n,u),N(n,a,u),r&&r.m(n,u),N(n,i,u)},p(n,[u]){_===(_=l(n))&&p?p.p(n,u):(p.d(1),p=_(n),p&&(p.c(),p.m(a.parentNode,a))),n[0].length>0?r?r.p(n,u):(r=Z(n),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i:Q,o:Q,d(n){n&&h(e),n&&h(t),p.d(n),n&&h(a),r&&r.d(n),n&&h(i)}}}function ee(s){return typeof s!="undefined"?new Date(s).toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):null}function B(s){return s===0?"processing":"complete"}function ke(s,e,o){let t,a,i;ve.subscribe(u=>{i=u});const l=i==null?void 0:i.token,_=i==null?void 0:i.username;let p=[];const r=oe();re(async()=>{const u=await fetch(`${de().serviceUrl}/account/contact/`,{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://3ee.com",Authorization:"Token "+l},mode:"cors"});o(0,p=await u.json()),typeof p!="undefined"&&p.length>0&&p.sort(function(d,k){return new Date(k.updated)-new Date(d.updated)})});function n(u){ge.update(d=>u),r("onSelectMessage")}return s.$$.update=()=>{s.$$.dirty&1&&o(2,t=p.filter(u=>u.read===!1&&u.status.status_type===1&&u.active).length),s.$$.dirty&1&&o(1,a=p.filter(u=>u.status.status_type===0&&u.active).length)},[p,a,t,_,n]}class we extends te{constructor(e){super(),se(this,e,ke,be,ae,{})}}function $e(s){let e,o,t,a,i;return a=new we({}),a.$on("onSelectMessage",s[0]),{c(){e=D(),o=y("section"),t=y("article"),ie(a.$$.fragment),this.h()},l(l){ce('[data-svelte="svelte-1itotn5"]',document.head).forEach(h),e=T(l),o=E(l,"SECTION",{class:!0});var p=b(o);t=E(p,"ARTICLE",{class:!0});var r=b(t);ue(a.$$.fragment,r),r.forEach(h),p.forEach(h),this.h()},h(){document.title="Messages from 3ee.com support",M(t,"class","content"),M(o,"class","background")},m(l,_){N(l,e,_),N(l,o,_),c(o,t),fe(a,t,null),i=!0},p:Q,i(l){i||(he(a.$$.fragment,l),i=!0)},o(l){pe(a.$$.fragment,l),i=!1},d(l){l&&h(e),l&&h(o),_e(a)}}}function Me(s){function e(o){me("/account/messages/response")}return[e]}class Te extends te{constructor(e){super(),se(this,e,Me,$e,ae,{})}}export{Te as default};
