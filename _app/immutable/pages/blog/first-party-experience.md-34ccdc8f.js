import{S as xh,i as Sh,s as Ah,C as Zc,w as Ih,x as Gh,y as Lh,z as Rh,A as Fd,q as Oh,o as Wh,B as qh,Z as Vd,e as n,t as p,k as c,c as o,a as l,h as r,d as t,m as u,b as f,R as Jc,g as i,I as a,E as Ch}from"../../chunks/index-8ed999ca.js";import{P as Nh}from"../../chunks/_post-60c1c672.js";import"../../chunks/menuContextStore-382f91e1.js";import"../../chunks/index-71ac3aa5.js";function Dh(dt){let d,g,_,v,h,k,ht,qi,sn,nn,on,F,V,Na,Ci,ln,kt,Ni,pn,j,Di,mt,Hi,Mi,rn,z,B,Da,Yi,cn,vt,Ui,un,yt,Fi,fn,wt,Vi,dn,bt,ji,hn,E,Ha,zi,Bi,Ma,$i,Ki,Ya,Qi,kn,gt,Ji,mn,_t,Zi,vn,Et,Xi,yn,$,K,Ua,el,wn,Tt,tl,bn,Q,al,Fa,sl,nl,gn,xe,Va,ol,il,_n,Pt,ll,En,xt,pl,Tn,Se,ja,rl,cl,Pn,St,ul,xn,Ae,za,fl,dl,Sn,At,hl,An,T,Ba,kl,ml,$a,vl,yl,Ka,wl,In,It,bl,Gn,J,Z,Qa,gl,Ln,Gt,_l,Rn,Lt,El,On,y,Ja,Tl,Pl,Za,xl,Sl,Xa,Al,Il,es,Gl,Wn,q,X,ts,Ll,as,Rl,qn,Rt,Ol,Cn,ee,Wl,Ie,ql,Cl,Nn,Ge,zd=`<code class="language-python">  <span class="token keyword">from</span> pytube <span class="token keyword">import</span> YouTube
  YouTube<span class="token punctuation">(</span><span class="token string">'https://youtu.be/youtube_id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>streams<span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>download<span class="token punctuation">(</span><span class="token punctuation">)</span></code>`,Dn,C,te,ss,Nl,ns,Dl,Hn,ae,Hl,Le,Ml,Yl,Mn,Re,Bd='<code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">poster</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com/poster.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code>',Yn,N,se,os,Ul,is,Fl,Un,P,Vl,Oe,jl,zl,We,Bl,$l,Fn,Ot,Wt,$d='<code class="language-bash"> youtube_transcript_api youtube_video_id --languages en --format webvtt <span class="token operator">></span> transcripts.vtt </code>',Vn,D,ne,ls,Kl,ps,Ql,jn,qt,Jl,zn,x,rs,Zl,Xl,cs,ep,tp,us,ap,Bn,oe,sp,qe,np,op,$n,Ct,fs,ip,Kn,Ce,Kd=`<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> Player <span class="token keyword">from</span> <span class="token string">'./Player.svelte'</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> videos <span class="token operator">=</span> <span class="token punctuation">[</span>
		<span class="token punctuation">&#123;</span>
			<span class="token literal-property property">controls</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">srcs</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token punctuation">&#123;</span>
					<span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'https://3ee.s3.amazonaws.com/video/tiled_phaser.mp4'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'video/mp4'</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token literal-property property">tracks</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token punctuation">&#123;</span>
					<span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'https://3ee.s3.amazonaws.com/video/tiled_phaser.vtt'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">kind</span><span class="token operator">:</span> <span class="token string">'captions'</span><span class="token punctuation">,</span>
					<span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'600'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">poster</span><span class="token operator">:</span> <span class="token string">'https://3ee.s3.amazonaws.com/video/tiled_phaser.webp'</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Video Player<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Player</span> <span class="token attr-name">&#123;videos&#125;</span> <span class="token punctuation">/></span></span></code>`,Qn,Nt,ds,lp,Jn,Ne,Qd=`<code class="language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">let</span> videos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">handlePlayed</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>currentSrc <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'video play'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">video</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>currentSrc <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">function</span> <span class="token function">handleEnded</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> e <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'video end'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">video</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>currentSrc <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	&#123;#each videos as video&#125;
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
			<span class="token attr-name">preload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span>
			<span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;video.width&#125;</span>
			<span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;video.height&#125;</span>
			<span class="token attr-name">poster</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;video.poster&#125;</span>
			<span class="token attr-name">controls</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;video.controls&#125;</span>
			<span class="token attr-name"><span class="token namespace">on:</span>play</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;handlePlayed&#125;</span>
			<span class="token attr-name"><span class="token namespace">on:</span>ended</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;handleEnded&#125;</span>
		<span class="token punctuation">></span></span>
			&#123;#each video.srcs as src&#125;
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;src.src&#125;</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;src.type&#125;</span> <span class="token punctuation">/></span></span>
			&#123;/each&#125;
			&#123;#if typeof video?.tracks !== 'undefined' &amp;&amp; video.tracks.length > 0&#125;
				&#123;#each video.tracks as track&#125;
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>track</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;track.src&#125;</span> <span class="token attr-name">kind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;track.kind&#125;</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;track.default&#125;</span> <span class="token punctuation">/></span></span>
				&#123;/each&#125;
			&#123;/if&#125;
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span>
	&#123;/each&#125;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
	<span class="token selector">video</span> <span class="token punctuation">&#123;</span>
		<span class="token property">border-radius</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span>
		<span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
		<span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
		<span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		<span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
		<span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token selector">.video-container</span> <span class="token punctuation">&#123;</span>
		<span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		<span class="token property">padding-bottom</span><span class="token punctuation">:</span> 56.25%<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code>`,Zn,H,pp,hs,rp,cp,De,up,Xn,M,ie,ks,fp,ms,dp,eo,S,hp,He,kp,mp,Me,vp,yp,to,Dt,wp,ao,Ye,Jd=`<code class="language-txt">  WEBVTT

  00:00:02.780 --> 00:00:05.310
  this is a prototype of a game on

  00:00:05.310 --> 00:00:08.849
  building all the tiles are designed by

  00:00:08.849 --> 00:00:12.990
  cert over at open game art org the link

  00:00:12.990 --> 00:00:15.660
  is in the description you can see this</code>`,so,le,bp,vs,gp,_p,no,A,ys,Ep,Tp,ws,Pp,xp,bs,Sp,oo,Ht,Ap,io,Ue,Zd='<code class="language-bash"><span class="token function">curl</span> https://my.api/captions?videoId<span class="token operator">=</span><span class="token number">1234</span> </code>',lo,Mt,Ip,po,Fe,pe,Gp,gs,Lp,Rp,ro,Yt,Op,co,Ve,Xd='<code class="language-bash"><span class="token function">curl</span> https://my.api/captions?videoId<span class="token operator">=</span>/user/home/captions/track.vtt </code>',uo,je,Wp,ze,qp,fo,re,Cp,_s,Np,Dp,ho,ce,Hp,Es,Mp,Yp,ko,Be,eh='<code class="language-bash"><span class="token function">curl</span> https://my.api/captions?videoId<span class="token operator">=</span><span class="token number">1234</span> </code>',mo,$e,th=`<code class="language-sql"><span class="token comment">#relational lookup using inner join</span>
<span class="token keyword">SELECT</span> videoId<span class="token punctuation">,</span> url<span class="token punctuation">,</span> caption
<span class="token keyword">FROM</span> videos
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> captions
<span class="token keyword">ON</span> videos<span class="token punctuation">.</span>videoId <span class="token operator">=</span> captions<span class="token punctuation">.</span>videoId<span class="token punctuation">;</span></code>`,vo,ue,fe,Ts,Up,yo,de,Fp,Ke,Vp,jp,wo,Ut,zp,bo,I,Ps,Bp,$p,xs,Kp,Qp,Ss,Jp,go,Ft,Zp,_o,Qe,ah=`<code class="language-javascript"><span class="token keyword">let</span> analytics <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Analytics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
analytics<span class="token punctuation">.</span><span class="token function">trackEvent</span><span class="token punctuation">(</span><span class="token string">'video'</span><span class="token punctuation">,</span> <span class="token string">'play'</span><span class="token punctuation">,</span> <span class="token string">'video_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,Eo,he,Xp,As,er,tr,To,Je,sh=`<code class="language-javascript"><span class="token function">trackEvent</span><span class="token punctuation">(</span><span class="token parameter">category<span class="token punctuation">,</span> action<span class="token punctuation">,</span> label</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">//Google</span>
  <span class="token function">ga</span><span class="token punctuation">(</span><span class="token string">'send'</span><span class="token punctuation">,</span> <span class="token string">'event'</span><span class="token punctuation">,</span> category<span class="token punctuation">,</span> action<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//umami</span>
  umami<span class="token punctuation">.</span><span class="token function">trackEvent</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>category action label<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'signup'</span><span class="token punctuation">,</span> <span class="token literal-property property">moreInfo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`,Po,m,ar,Ze,sr,nr,Xe,or,ir,Is,lr,pr,Gs,rr,xo,et,Vt,jt,tt,Xc,So,zt,cr,Ao,at,nh=`<code class="language-javascript"><span class="token comment">//check config</span>
<span class="token keyword">let</span> isGoogleOn <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'google_analytics'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//track event</span>
<span class="token function">trackEvent</span><span class="token punctuation">(</span><span class="token parameter">category<span class="token punctuation">,</span> action<span class="token punctuation">,</span> label</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isGoogleOn<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">ga</span><span class="token punctuation">(</span><span class="token string">'send'</span><span class="token punctuation">,</span> <span class="token string">'event'</span><span class="token punctuation">,</span> category<span class="token punctuation">,</span> action<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  umami<span class="token punctuation">.</span><span class="token function">trackEvent</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>category action label<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'signup'</span><span class="token punctuation">,</span> <span class="token literal-property property">moreInfo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`,Io,Bt,ur,Go,st,oh=`<code class="language-javascript"><span class="token function">trackEvent</span><span class="token punctuation">(</span><span class="token parameter">category<span class="token punctuation">,</span> action<span class="token punctuation">,</span> label</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  umami<span class="token punctuation">.</span><span class="token function">trackEvent</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>category action label<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'signup'</span><span class="token punctuation">,</span> <span class="token literal-property property">moreInfo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`,Lo,$t,fr,Ro,nt,Kt,Qt,ot,eu,Oo,Y,ke,Ls,dr,Rs,hr,Wo,it,Jt,kr,qo,G,mr,Os,vr,yr,Ws,wr,br,Co,lt,Zt,Xt,pt,tu,No,ea,gr,Do,ta,_r,Ho,me,ve,qs,Er,Mo,aa,Tr,Yo,L,sa,Cs,Pr,xr,Sr,na,Ns,Ar,Ir,Gr,oa,Ds,Lr,Rr,Uo,ia,Or,Fo,rt,ih=`<code class="language-javascript"><span class="token comment">// Set the cookie</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://example.com/mute'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Get the mute boolean from the response</span>
    <span class="token keyword">const</span> mute <span class="token operator">=</span> response<span class="token punctuation">.</span>mute<span class="token punctuation">;</span>

    <span class="token comment">// Set the cookie with a 7-day expiration date</span>
    <span class="token keyword">const</span> expirationDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    expirationDate<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>expirationDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">mute=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>mute<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">;expires=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>expirationDate<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">;path=/</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Error fetching mute boolean: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>error<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,Vo,la,Wr,jo,ct,lh=`<code class="language-javascript"><span class="token comment">// Set local storage</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://example.com/mute'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Get the mute boolean from the response</span>
    <span class="token keyword">const</span> mute <span class="token operator">=</span> response<span class="token punctuation">.</span>mute<span class="token punctuation">;</span>

    <span class="token comment">// Set local storage with the mute boolean</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'mute'</span><span class="token punctuation">,</span> mute<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">Error fetching mute boolean: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>error<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get mute from storage</span>
<span class="token keyword">const</span> mute <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'mute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,zo,R,qr,Hs,Cr,Nr,Ms,Dr,Hr,Bo,ut,ph=`<code class="language-javascript"><span class="token comment">// Set local storage</span>
<span class="token keyword">const</span> videoPlayerSettings <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">mute</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">volume</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  <span class="token literal-property property">autoplay</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">paused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fullscreen</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Serialize the video player settings object to a string and store it in local storage</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'videoPlayerSettings'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>videoPlayerSettings<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get video player settings from storage</span>
<span class="token keyword">const</span> storedVideoPlayerSettings <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'videoPlayerSettings'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Access the properties from the stored video player settings object</span>
<span class="token keyword">const</span> mute <span class="token operator">=</span> storedVideoPlayerSettings<span class="token punctuation">.</span>mute<span class="token punctuation">;</span>
<span class="token keyword">const</span> autoplay <span class="token operator">=</span> storedVideoPlayerSettings<span class="token punctuation">.</span>autoplay<span class="token punctuation">;</span>
<span class="token keyword">const</span> paused <span class="token operator">=</span> storedVideoPlayerSettings<span class="token punctuation">.</span>paused<span class="token punctuation">;</span>
</code>`,$o,ye,we,Ys,Mr,Ko,O,Yr,Us,Ur,Fr,Fs,Vr,jr,Qo,pa,zr,Jo,be,ge,Vs,Br,Zo,ra,$r,Xo,ca,Kr,ei,ua,Qr,ti,fa,Jr,ai,da,Zr,si,w,js,Xr,ec,zs,tc,ac,Bs,sc,nc,$s,oc,ni,_e,ic,Ks,lc,pc,oi,W,rc,Qs,cc,uc,Js,fc,dc,ii,ha,hc,li,ka,kc,pi,ma,mc,ri,ft,va,vc,ci,ya,yc,ui,b,wa,Zs,wc,bc,gc,ba,Xs,_c,Ec,Tc,ga,en,Pc,xc,Sc,_a,tn,Ac,Ic,fi,Ea,Gc,di,Ta,Lc,hi,ki;return{c(){d=n("p"),g=p("3ee Games embarked on a mission to become a first-party website, prioritizing user privacy above all else. As we navigated this uncharted territory, a conscious decision was made to avoid cookies and minimize third-party dependencies. Let\u2019s discuss the insights of financial aspects of embracing self-hosted open-source and homebrew technologies."),_=c(),v=n("p"),h=p("The "),k=n("code"),ht=p("code"),qi=p(" in this article is meant to entice ideas and not meant to be a template that can be copy and pasted.  It is designed to mentor you to come up with ideas on how you would implement this yourself on the technology you work with."),sn=c(),nn=n("hr"),on=c(),F=n("h2"),V=n("a"),Na=n("span"),Ci=p("First Party centric: built in privacy"),ln=c(),kt=n("p"),Ni=p("3ee Games isn\u2019t a company that skates on the line of being GDPR compliant or only implements what is required in our country.  We wanted to position our company where privacy is an investment we make in our products and supporting different levels based on what the person wants.  We welcome new GDPR policies, updates, and new features.  Since privacy is built into our platform, pivoting is smooth whenever laws are refined."),pn=c(),j=n("p"),Di=p("Similar to our belief and goals with "),mt=n("a"),Hi=p("accessibility"),Mi=p(", privacy is a feature that should be built into your product.  It\u2019s not a checkbox that you can check off and say you\u2019re done.  It\u2019s a continuous process of making sure your product is built with privacy in mind."),rn=c(),z=n("h2"),B=n("a"),Da=n("span"),Yi=p("How did we get here?"),cn=c(),vt=n("p"),Ui=p("We are passionate about privacy and security.  Over the years as laws have evolved from simple \u201Cdo not track me\u201D to full blown General Data Protection Regulation (GDPR) compliance, we wanted to embrace the forefront of privacy by laying down a strong foundation."),un=c(),yt=n("p"),Fi=p("Slowly tread though what third parties we thought we needed.  Every third party script that people take for granted use and share cookies with other vendors.  Examples include embedding Youtube videos, implementing Google Analytics, Tag Managers, Advertising scripts, and the list keeps going because it\u2019s massive."),fn=c(),wt=n("p"),Vi=p("Effective strategy for transitioning to a first-party experience. This process is essential for securing user data and maintaining a high level of privacy."),dn=c(),bt=n("p"),ji=p("Outlined below are several pivotal steps to initiate the shift towards a first-party experience:"),hn=c(),E=n("ul"),Ha=n("li"),zi=p("Conduct a thorough analysis of all cookies and envision the functionality of 3ee Games without their use."),Bi=c(),Ma=n("li"),$i=p("Implement a native HTML5 player to replace the YouTube player, while maintaining an external YouTube channel for promotional purposes."),Ki=c(),Ya=n("li"),Qi=p("Substitute Google Services such as Analytics and Fonts with cookie-free, self-hosted alternatives."),kn=c(),gt=n("p"),Ji=p("Though third-party services such as Google Analytics may seem appealing due to their ease of implementation and cost-effectiveness, they often come at the expense of user data privacy. In reality, these services monetize user data, necessitating the use of cookie banners to inform users of data collection and offering them an option to opt out."),mn=c(),_t=n("p"),Zi=p("Transitioning to a first-party experience can be challenging for businesses, as seen in the example of migrating from the YouTube player. Such a move raises numerous questions, such as video hosting, closed captioning file storage, and the development of a cost-effective caching strategy."),vn=c(),Et=n("p"),Xi=p("Remember that embracing a first-party experience is a journey rather than a sprint. Hastily rushing through the process may result in unforeseen costs and complications."),yn=c(),$=n("h2"),K=n("a"),Ua=n("span"),el=p("Identify all cookies"),wn=c(),Tt=n("p"),tl=p("Start off small.  Identify cookies that store state.  For example, a cookie may store a value if a person accepted or declined a cookie banner.  The frontend will look at that cookie and do something with it.  State cookies are the first to go and you shouldn\u2019t be using them."),bn=c(),Q=n("p"),al=p("At some point, sometimes we as developers have rushed to stored state in a cookie.  The reason is: "),Fa=n("strong"),sl=p("we have no other place to store it"),nl=p(".  There are what seems to be infinite reasons why, one being: we have a backend service that is not ready to store state."),gn=c(),xe=n("p"),Va=n("strong"),ol=p("\u{1F36A} State Cookies"),il=p(":"),_n=c(),Pt=n("p"),ll=p("Start by identifying cookies that store state, such as accepting or declining a cookie banner. State cookies are the first to go, and you should avoid using them whenever possible. If you have to use them, try to find alternative ways to store state that don\u2019t involve cookies."),En=c(),xt=n("p"),pl=p("For applications with guest experiences, try to encourage users to create an account. If your sign-up process is complicated, simplify it to encourage more people to sign up. By having users create an account, you can store their data properly instead of relying on state cookies."),Tn=c(),Se=n("p"),ja=n("strong"),rl=p("\u{1F36A} Shared Cookies"),cl=p(":"),Pn=c(),St=n("p"),ul=p("Once you\u2019ve tackled state cookies, move on to researching third parties you want to replace. It\u2019s important to find a self-hosted or homebrew solution that is GDPR compliant and does not use cookies. This may take time, but it\u2019s worth the investment to have more control over your data."),xn=c(),Ae=n("p"),za=n("strong"),fl=p("\u{1F9B6} Removing Third Party Footprints"),dl=p(":"),Sn=c(),At=n("p"),hl=p("There will be third parties that are costly to remove and replace, so it\u2019s important to carefully consider the transition. For example, if you are using a third-party service to host your videos, you\u2019ll need to move those videos to a new location."),An=c(),T=n("ul"),Ba=n("li"),kl=p("Replace cookies that use state.  Figure out the logic and push forward."),ml=c(),$a=n("li"),vl=p("Carefully and tactly remove cookies that are shared by third parties.  The end goal is to look for self hosted solutions that don\u2019t use cookies."),yl=c(),Ka=n("li"),wl=p("If you\u2019re using a third party service that handles all the costs and it\u2019s free: don\u2019t stop looking for alternatives.  There is always a cost.  The cost is your data."),In=c(),It=n("p"),bl=p("It\u2019s important to remember that this is a marathon, not a sprint. Don\u2019t try to tackle everything at once, but instead, focus on one step at a time. Pace yourself and don\u2019t stop looking for alternatives. There is always a cost, and it\u2019s your data that\u2019s at stake."),Gn=c(),J=n("h2"),Z=n("a"),Qa=n("span"),gl=p("Replace Youtube Player"),Ln=c(),Gt=n("p"),_l=p("Keeping the mantra of every site is different - we didn\u2019t have many videos at the time to move off Youtube.  We also didn\u2019t have the source files for the videos we made - so the original data we did not have.  We had to snag all of our data off of Youtube.  And Youtube doesn\u2019t make that easy, it\u2019s messy."),Rn=c(),Lt=n("p"),El=p("We do not have the original source files so we need to pull this data from Youtube:"),On=c(),y=n("ul"),Ja=n("li"),Tl=p("Download all of our videos in the highest quality possible."),Pl=c(),Za=n("li"),xl=p("Download all of the thumbnails associated with the videos."),Sl=c(),Xa=n("li"),Al=p("Figure out how to download all of the closed captioning files."),Il=c(),es=n("li"),Gl=p("Replace Youtube player with a native HTML5 player and wire up analytics."),Wn=c(),q=n("h3"),X=n("a"),ts=n("span"),Ll=p("\u2B07\uFE0F "),as=n("strong"),Rl=p("Downloading your videos"),qn=c(),Rt=n("p"),Ol=p("Within your YouTube Studio account, you can download your videos.  This can be cumbersum and time consuming going through each video and exporting it.  Many websites have thousands of videos on Youtube.  You\u2019re in luck because there are thousands of tools to download YouTube videos."),Cn=c(),ee=n("p"),Wl=p("To setup an automated means of downloading all your videos, look into various open source libraries and CLI tools.  3ee Games uses python for development.  We\u2019ve used "),Ie=n("a"),ql=p("https://github.com/pytube/pytube"),Cl=p(".  See the example below:"),Nn=c(),Ge=n("pre"),Dn=c(),C=n("h3"),te=n("a"),ss=n("span"),Nl=p("\u{1F5BC}\uFE0F "),ns=n("strong"),Dl=p("thumbnails"),Hn=c(),ae=n("p"),Hl=p("If your YouTube account has custom thumbnails, you can download those as well.  HTML5 supports the "),Le=n("a"),Ml=p("poster attribute"),Yl=p(" on the video tag.  An image will be shown while the video is downloading."),Mn=c(),Re=n("pre"),Yn=c(),N=n("h3"),se=n("a"),os=n("span"),Ul=p("\u{1F4C7} "),is=n("strong"),Fl=p("Youtube Captioning"),Un=c(),P=n("p"),Vl=p("We used an open source solution: "),Oe=n("a"),jl=p("https://github.com/jdepoix/youtube-transcript-api"),zl=p(".  Youtube_transcript_api is a CLI that will download captions.  It supports different formatters provide the captioning data in different formats.  Our videos use "),We=n("a"),Bl=p("Web Video Text Tracks Format"),$l=p(" (WebVTT).  With this CLI, it was easy:"),Fn=c(),Ot=n("blockquote"),Wt=n("pre"),Vn=c(),D=n("h3"),ne=n("a"),ls=n("span"),Kl=p("\u{1F4FA}  "),ps=n("strong"),Ql=p("Replace Youtube with native video"),jn=c(),qt=n("p"),Jl=p("While there are many video players to choose from out in the open source community, we decided to keep it simple, schematic, and native.  Build a player that uses the HTML5 video tag and tracks for closed captioning."),zn=c(),x=n("ul"),rs=n("li"),Zl=p("Use the HTML5 video tag to play the video."),Xl=c(),cs=n("li"),ep=p("Captioning is handled by the native track tag."),tp=c(),us=n("li"),ap=p("Wire up analyics to specific events."),Bn=c(),oe=n("p"),sp=p("3ee Games frontend uses "),qe=n("a"),np=p("svelte"),op=p(".  Building a video player component is straight forward.  Simply passing in a video object to the component and it binds the video sources, poster, captioning, and analytics."),$n=c(),Ct=n("p"),fs=n("strong"),ip=p("App.svelte"),Kn=c(),Ce=n("pre"),Qn=c(),Nt=n("p"),ds=n("strong"),lp=p("player.svelte"),Jn=c(),Ne=n("pre"),Zn=c(),H=n("p"),pp=p("View this demo of the video player in "),hs=n("strong"),rp=p("REPL"),cp=p(": "),De=n("a"),up=p("Svelte REPL example"),Xn=c(),M=n("h3"),ie=n("a"),ks=n("span"),fp=p("\u{1F4C7} "),ms=n("strong"),dp=p("Handle captions"),eo=c(),S=n("p"),hp=p("Within an HTML5 video tag, you can pass in captioning through the "),He=n("a"),kp=p("track"),mp=p(" tag.  The track tag is a child of the video tag and is used to provide captions, subtitles, and metadata.  The track tag expects a "),Me=n("a"),vp=p("WebVTT"),yp=p(" file.  The WebVTT file is a text file that contains the captioning data."),to=c(),Dt=n("p"),wp=p("Curious what a WebVTT file looks like?  Here is an example:"),ao=c(),Ye=n("pre"),so=c(),le=n("p"),bp=p("WebVTT files follow browser\u2019s "),vs=n("strong"),gp=p("cross domain security policy"),_p=p(".  WebVTT files must be on the same domain the web client is on (the website the video tag is created on).  Again, all websites are different and many will fall into the same boat: WebVTT are hosted on a CDN.  There are solutions to this problem and let\u2019s go over a few."),no=c(),A=n("ul"),ys=n("li"),Ep=p("Create a backend proxy service."),Tp=c(),ws=n("li"),Pp=p("Proxy service downloads the WebVTT file from the CDN and returns the contents to the web client."),xp=c(),bs=n("li"),Sp=p("Web client passes the captions content to the track tag."),oo=c(),Ht=n("p"),Ap=p("Setup a backend service that downloads the WebVTT file from the CDN and returns the contents to the client though an endpoint.  For example, you setup a route the web client asycnronously calls to get the WebVTT file.  For instance:"),io=c(),Ue=n("pre"),lo=c(),Mt=n("p"),Ip=p("Pass the response to the web client\u2019s video track tag and your captions will load and be available within the video player."),po=c(),Fe=n("blockquote"),pe=n("p"),Gp=p("\u{1F6A8} "),gs=n("strong"),Lp=p("Danger"),Rp=p(": Setup your proxy services with care.  Never expose an endpoint that takes a url or file path as a parameter."),ro=c(),Yt=n("p"),Op=p("For example:"),co=c(),Ve=n("pre"),uo=c(),je=n("p"),Wp=p("This can have terrible security risks and unsafe to proxy since anyone can pass in any url and download any file.  This violates OWASP 10: "),ze=n("a"),qp=p("A06:2021 \u2013 Vulnerable and Outdated Components"),fo=c(),re=n("p"),Cp=p("Only allow your application permission to call the endpoint.  Unless there is a specific reason, you "),_s=n("strong"),Np=p("do not"),Dp=p(" want to serve a public api where other applications outside your domain can use."),ho=c(),ce=n("p"),Hp=p("A better example would be to use the "),Es=n("code"),Mp=p("id"),Yp=p(" of the video and use that to lookup the WebVTT file:"),ko=c(),Be=n("pre"),mo=c(),$e=n("pre"),vo=c(),ue=n("h2"),fe=n("a"),Ts=n("span"),Up=p("Replace Google Analytics"),yo=c(),de=n("p"),Fp=p("3ee Games uses "),Ke=n("a"),Vp=p("umami"),jp=p(" for analytics.  Umami is open source, doesn\u2019t use cookies, and is self hosted.  Other features include tracking custom events - like what we worked on above with the video player."),wo=c(),Ut=n("p"),zp=p("Let\u2019s break down the steps to replace Google Analytics with umami (or any other analytics platform):"),bo=c(),I=n("ul"),Ps=n("li"),Bp=p("Plan a way to support both analytics platforms.  This will give you an advantage to compare the data between the two platforms."),$p=c(),xs=n("li"),Kp=p("Translate, port, or migrate the custom events from Google Analytics to the new platform."),Qp=c(),Ss=n("li"),Jp=p("Configure switches to turn on and off each analytics platform."),go=c(),Ft=n("p"),Zp=p("There are many options to choose from when supporting different analytics platforms.  A common solution is creating a wrapper around the analytics platform.  This wrapper will handle the differences between the two platforms.  For example, the wrapper will handle the differences between the Google Analytics and umami API:"),_o=c(),Qe=n("pre"),Eo=c(),he=n("p"),Xp=p("The wrapper calls "),As=n("code"),er=p("trackEvent"),tr=p(" which in turn calls both Google Analytics and umami:"),To=c(),Je=n("pre"),Po=c(),m=n("p"),ar=p("Preserving your events and porting them over to the new platform is a tedious task.  Verify the events are working as expected in a networking tool such as the built-in browser networking tools, "),Ze=n("a"),sr=p("Fiddler"),nr=p(", or "),Xe=n("a"),or=p("Charles"),ir=p(".  To see "),Is=n("em"),lr=p("only"),pr=p(" the requests made to the analytics platform, filter the requests by "),Gs=n("code"),rr=p("collect"),xo=c(),et=n("blockquote"),Vt=n("blockquote"),jt=n("p"),tt=n("img"),So=c(),zt=n("p"),cr=p("Now that can use both Google Analytics and umami, we need to configure a switch to turn on and off Google Analytics.  In the example below, we assume umami is working correctly and we create a switch for Google Analytics and only fire the events if the switch is on:"),Ao=c(),at=n("pre"),Io=c(),Bt=n("p"),ur=p("This allows you to pivot quickly if you need to restore Google Analytics temporarly.  With iteration and time, you can remove the switch and remove Google Analytics from your codebase.  Since we are using a wrapper, we can easily remove the Google Analytics code from the wrapper:"),Go=c(),st=n("pre"),Lo=c(),$t=n("p"),fr=p("At this point, we have moved to our new platform.  Now it\u2019s time to update your privacy policy and remove all references to Google Analytics!  Whether you decided to use umami or another analytics platform, you\u2019re now in control of your data."),Ro=c(),nt=n("blockquote"),Kt=n("blockquote"),Qt=n("p"),ot=n("img"),Oo=c(),Y=n("h3"),ke=n("a"),Ls=n("span"),dr=p("\u{1F4CA} "),Rs=n("strong"),hr=p("Wire up analytics"),Wo=c(),it=n("blockquote"),Jt=n("p"),kr=p("We are able to use our cloud technology to serve umami on premise with kubernetes and scale to the cloud if needed.  This way we aren\u2019t paying cloud providers when we\u2019re not scaling."),qo=c(),G=n("p"),mr=p("We already have umami in place.  For this simple video player, we wired up umami to the "),Os=n("code"),vr=p("play"),yr=p(" and "),Ws=n("code"),wr=p("end"),br=p(" events."),Co=c(),lt=n("blockquote"),Zt=n("blockquote"),Xt=n("p"),pt=n("img"),No=c(),ea=n("p"),gr=p("As we finish building the video player, test your videos across different browsers and devices.  Make sure the video player is working as expected.  If you\u2019re using a proxy service to download the WebVTT file, make sure the proxy service is working as expected."),Do=c(),ta=n("p"),_r=p("Finally, remove the tracker from your website: If you\u2019re using Google Tag Manager, you can remove the tracker from the container.  If you\u2019re using Google Analytics directly, you can remove the script tag from your website."),Ho=c(),me=n("h2"),ve=n("a"),qs=n("span"),Er=p("From cookies to LocalStorage"),Mo=c(),aa=n("p"),Tr=p("Local Storage is a better alternative to state cookies for performance, privacy, and GDPR compliance. Here are some reasons why:"),Yo=c(),L=n("ul"),sa=n("li"),Cs=n("strong"),Pr=p("Performance"),xr=p(": LocalStorage is faster than cookies because it\u2019s stored on the client-side, eliminating the need to send data back and forth between the server and client with every request/response. Since cookies are sent with every request, they increase network traffic and slow down the page load time."),Sr=c(),na=n("li"),Ns=n("strong"),Ar=p("Privacy"),Ir=p(": Cookies are often used to track user behavior and preferences, and they can be easily accessed by third-party scripts. In contrast, LocalStorage data is only accessible by the domain that created it, making it a more secure option for storing user state."),Gr=c(),oa=n("li"),Ds=n("strong"),Lr=p("GDPR compliance"),Rr=p(": The General Data Protection Regulation (GDPR) requires websites to obtain user consent before storing any personal data. With LocalStorage, it\u2019s easier to obtain and manage user consent since it only stores data for a specific website. Cookies, on the other hand, can be shared across different domains, making it difficult to obtain user consent and comply with GDPR regulations."),Uo=c(),ia=n("p"),Or=p("In this example, we have a service that rechieves a user\u2019s mute preference.  We store in it a cookie and use it across the application:"),Fo=c(),rt=n("pre"),Vo=c(),la=n("p"),Wr=p("Porting this over to local storage:"),jo=c(),ct=n("pre"),zo=c(),R=n("p"),qr=p("Now we\u2019ll take it further and store an object in local storage by using "),Hs=n("code"),Cr=p("JSON.stringify"),Nr=p(" and "),Ms=n("code"),Dr=p("JSON.parse"),Hr=p(":"),Bo=c(),ut=n("pre"),$o=c(),ye=n("h2"),we=n("a"),Ys=n("span"),Mr=p("Updating privacy policies"),Ko=c(),O=n("p"),Yr=p("In terms of privacy laws, many countries have specific regulations that require website owners to inform users about how their personal data is being collected, processed, and stored. For example, the General Data Protection Regulation (GDPR) in the European Union requires that websites provide "),Us=n("strong"),Ur=p("clear"),Fr=p(" and "),Fs=n("strong"),Vr=p("transparent"),jr=p(" information about how user state is being collected and used."),Qo=c(),pa=n("p"),zr=p("Update the use of local storage in your privacy policy. Aim to be transparent about local storage usage: builds trust with users and ensures that you are complying with relevant privacy laws and regulations."),Jo=c(),be=n("h2"),ge=n("a"),Vs=n("span"),Br=p("The cost of first party"),Zo=c(),ra=n("p"),$r=p("Moving off a third party vendor and self-hosting can have both financial and technical implications that need to be carefully considered before making a decision."),Xo=c(),ca=n("p"),Kr=p("The first fincial desision is figuring out the initial investment required to set up and maintain a self-hosted solution."),ei=c(),ua=n("p"),Qr=p("This includes the cost of hardware, software, and personnel to manage the system. For example, if a company is using a third party customer relationship management (CRM) tool and decides to move to a self-hosted solution, they will need to purchase and maintain the servers, databases, and software necessary to run the system."),ti=c(),fa=n("p"),Jr=p("Another cost to consider is the ongoing maintenance and support of the self-hosted solution. This includes updates, patches, and security measures to ensure the system is up to date and secure. This can be a significant burden on internal IT staff, which may require additional training or hiring of dedicated personnel."),ai=c(),da=n("p"),Zr=p("Take our real world use case where we are using Umami instead of Google Analytics, here are new maintenance tasks:"),si=c(),w=n("ul"),js=n("li"),Xr=p("Manage upgrades: regularly maintain security and features."),ec=c(),zs=n("li"),tc=p("Update SSL certificates."),ac=c(),Bs=n("li"),sc=p("Manage backups."),nc=c(),$s=n("li"),oc=p("Monitor uptime: You need visiblity when your platform is down."),ni=c(),_e=n("p"),ic=p("This looks complicated at first glance but with proper planning around architecture, we are able to execute all these items without hassle: "),Ks=n("strong"),lc=p("by using containerization"),pc=p(" to simplify and automate our application deployment process. It helps us gain better visibility and consistency across different environments."),oi=c(),W=n("p"),rc=p("By automating various tasks like provisioning, scaling, and monitoring, we can "),Qs=n("em"),cc=p("quickly"),uc=p(" respond to changes in demand and "),Js=n("em"),fc=p("optimize"),dc=p(" our infrastructure usage."),ii=c(),ha=n("p"),hc=p("In addition to the financial costs, there are also technical implications to consider when moving off a third party vendor."),li=c(),ka=n("p"),kc=p("Another example is email - email can be tough to handle yourself: if a company is using a third party email marketing platform and decides to move to a self-hosted email marketing solution, they will need to ensure that their email servers are configured properly to avoid being flagged as spam."),pi=c(),ma=n("p"),mc=p("This requires technical expertise and ongoing monitoring to maintain good email deliverability.  In this case, we would rather have a third party that handles those headaches for us."),ri=c(),ft=n("blockquote"),va=n("p"),vc=p("If you\u2019re interested in calculating the costs of moving off of Youtube, take a deep look into your channel\u2019s analytics to get a solid understand of the costs involved around usage."),ci=c(),ya=n("p"),yc=p("When analyzing YouTube analytics to determine the cost of moving off YouTube to your own CDN, highlight the following:"),ui=c(),b=n("ul"),wa=n("li"),Zs=n("strong"),wc=p("Engagement"),bc=p(": how much traffic is the channel receiving?"),gc=c(),ba=n("li"),Xs=n("strong"),_c=p("Geographic"),Ec=p(": determine where the audience is located. Important to factor which regions to setup your CDN."),Tc=c(),ga=n("li"),en=n("strong"),Pc=p("Revenue"),xc=p(": income being generated through advertising."),Sc=c(),_a=n("li"),tn=n("strong"),Ac=p("Device and platform"),Ic=p(": figure out how to optimize content delivery."),fi=c(),Ea=n("p"),Gc=p("These metrics provide valuable insights to determine the feasibility of moving off YouTube to another CDN."),di=c(),Ta=n("p"),Lc=p("Ultimately, the decision to move off a vendor and self-host depends on the specific needs and resources of the company. While self-hosting may offer more control and customization, it can also require significant financial and technical investments."),hi=c(),ki=n("hr"),this.h()},l(e){d=o(e,"P",{});var s=l(d);g=r(s,"3ee Games embarked on a mission to become a first-party website, prioritizing user privacy above all else. As we navigated this uncharted territory, a conscious decision was made to avoid cookies and minimize third-party dependencies. Let\u2019s discuss the insights of financial aspects of embracing self-hosted open-source and homebrew technologies."),s.forEach(t),_=u(e),v=o(e,"P",{});var mi=l(v);h=r(mi,"The "),k=o(mi,"CODE",{});var au=l(k);ht=r(au,"code"),au.forEach(t),qi=r(mi," in this article is meant to entice ideas and not meant to be a template that can be copy and pasted.  It is designed to mentor you to come up with ideas on how you would implement this yourself on the technology you work with."),mi.forEach(t),sn=u(e),nn=o(e,"HR",{}),on=u(e),F=o(e,"H2",{id:!0});var Rc=l(F);V=o(Rc,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var su=l(V);Na=o(su,"SPAN",{class:!0}),l(Na).forEach(t),su.forEach(t),Ci=r(Rc,"First Party centric: built in privacy"),Rc.forEach(t),ln=u(e),kt=o(e,"P",{});var nu=l(kt);Ni=r(nu,"3ee Games isn\u2019t a company that skates on the line of being GDPR compliant or only implements what is required in our country.  We wanted to position our company where privacy is an investment we make in our products and supporting different levels based on what the person wants.  We welcome new GDPR policies, updates, and new features.  Since privacy is built into our platform, pivoting is smooth whenever laws are refined."),nu.forEach(t),pn=u(e),j=o(e,"P",{});var vi=l(j);Di=r(vi,"Similar to our belief and goals with "),mt=o(vi,"A",{href:!0});var ou=l(mt);Hi=r(ou,"accessibility"),ou.forEach(t),Mi=r(vi,", privacy is a feature that should be built into your product.  It\u2019s not a checkbox that you can check off and say you\u2019re done.  It\u2019s a continuous process of making sure your product is built with privacy in mind."),vi.forEach(t),rn=u(e),z=o(e,"H2",{id:!0});var Oc=l(z);B=o(Oc,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var iu=l(B);Da=o(iu,"SPAN",{class:!0}),l(Da).forEach(t),iu.forEach(t),Yi=r(Oc,"How did we get here?"),Oc.forEach(t),cn=u(e),vt=o(e,"P",{});var lu=l(vt);Ui=r(lu,"We are passionate about privacy and security.  Over the years as laws have evolved from simple \u201Cdo not track me\u201D to full blown General Data Protection Regulation (GDPR) compliance, we wanted to embrace the forefront of privacy by laying down a strong foundation."),lu.forEach(t),un=u(e),yt=o(e,"P",{});var pu=l(yt);Fi=r(pu,"Slowly tread though what third parties we thought we needed.  Every third party script that people take for granted use and share cookies with other vendors.  Examples include embedding Youtube videos, implementing Google Analytics, Tag Managers, Advertising scripts, and the list keeps going because it\u2019s massive."),pu.forEach(t),fn=u(e),wt=o(e,"P",{});var ru=l(wt);Vi=r(ru,"Effective strategy for transitioning to a first-party experience. This process is essential for securing user data and maintaining a high level of privacy."),ru.forEach(t),dn=u(e),bt=o(e,"P",{});var cu=l(bt);ji=r(cu,"Outlined below are several pivotal steps to initiate the shift towards a first-party experience:"),cu.forEach(t),hn=u(e),E=o(e,"UL",{});var Pa=l(E);Ha=o(Pa,"LI",{});var uu=l(Ha);zi=r(uu,"Conduct a thorough analysis of all cookies and envision the functionality of 3ee Games without their use."),uu.forEach(t),Bi=u(Pa),Ma=o(Pa,"LI",{});var fu=l(Ma);$i=r(fu,"Implement a native HTML5 player to replace the YouTube player, while maintaining an external YouTube channel for promotional purposes."),fu.forEach(t),Ki=u(Pa),Ya=o(Pa,"LI",{});var du=l(Ya);Qi=r(du,"Substitute Google Services such as Analytics and Fonts with cookie-free, self-hosted alternatives."),du.forEach(t),Pa.forEach(t),kn=u(e),gt=o(e,"P",{});var hu=l(gt);Ji=r(hu,"Though third-party services such as Google Analytics may seem appealing due to their ease of implementation and cost-effectiveness, they often come at the expense of user data privacy. In reality, these services monetize user data, necessitating the use of cookie banners to inform users of data collection and offering them an option to opt out."),hu.forEach(t),mn=u(e),_t=o(e,"P",{});var ku=l(_t);Zi=r(ku,"Transitioning to a first-party experience can be challenging for businesses, as seen in the example of migrating from the YouTube player. Such a move raises numerous questions, such as video hosting, closed captioning file storage, and the development of a cost-effective caching strategy."),ku.forEach(t),vn=u(e),Et=o(e,"P",{});var mu=l(Et);Xi=r(mu,"Remember that embracing a first-party experience is a journey rather than a sprint. Hastily rushing through the process may result in unforeseen costs and complications."),mu.forEach(t),yn=u(e),$=o(e,"H2",{id:!0});var Wc=l($);K=o(Wc,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var vu=l(K);Ua=o(vu,"SPAN",{class:!0}),l(Ua).forEach(t),vu.forEach(t),el=r(Wc,"Identify all cookies"),Wc.forEach(t),wn=u(e),Tt=o(e,"P",{});var yu=l(Tt);tl=r(yu,"Start off small.  Identify cookies that store state.  For example, a cookie may store a value if a person accepted or declined a cookie banner.  The frontend will look at that cookie and do something with it.  State cookies are the first to go and you shouldn\u2019t be using them."),yu.forEach(t),bn=u(e),Q=o(e,"P",{});var yi=l(Q);al=r(yi,"At some point, sometimes we as developers have rushed to stored state in a cookie.  The reason is: "),Fa=o(yi,"STRONG",{});var wu=l(Fa);sl=r(wu,"we have no other place to store it"),wu.forEach(t),nl=r(yi,".  There are what seems to be infinite reasons why, one being: we have a backend service that is not ready to store state."),yi.forEach(t),gn=u(e),xe=o(e,"P",{});var qc=l(xe);Va=o(qc,"STRONG",{});var bu=l(Va);ol=r(bu,"\u{1F36A} State Cookies"),bu.forEach(t),il=r(qc,":"),qc.forEach(t),_n=u(e),Pt=o(e,"P",{});var gu=l(Pt);ll=r(gu,"Start by identifying cookies that store state, such as accepting or declining a cookie banner. State cookies are the first to go, and you should avoid using them whenever possible. If you have to use them, try to find alternative ways to store state that don\u2019t involve cookies."),gu.forEach(t),En=u(e),xt=o(e,"P",{});var _u=l(xt);pl=r(_u,"For applications with guest experiences, try to encourage users to create an account. If your sign-up process is complicated, simplify it to encourage more people to sign up. By having users create an account, you can store their data properly instead of relying on state cookies."),_u.forEach(t),Tn=u(e),Se=o(e,"P",{});var Cc=l(Se);ja=o(Cc,"STRONG",{});var Eu=l(ja);rl=r(Eu,"\u{1F36A} Shared Cookies"),Eu.forEach(t),cl=r(Cc,":"),Cc.forEach(t),Pn=u(e),St=o(e,"P",{});var Tu=l(St);ul=r(Tu,"Once you\u2019ve tackled state cookies, move on to researching third parties you want to replace. It\u2019s important to find a self-hosted or homebrew solution that is GDPR compliant and does not use cookies. This may take time, but it\u2019s worth the investment to have more control over your data."),Tu.forEach(t),xn=u(e),Ae=o(e,"P",{});var Nc=l(Ae);za=o(Nc,"STRONG",{});var Pu=l(za);fl=r(Pu,"\u{1F9B6} Removing Third Party Footprints"),Pu.forEach(t),dl=r(Nc,":"),Nc.forEach(t),Sn=u(e),At=o(e,"P",{});var xu=l(At);hl=r(xu,"There will be third parties that are costly to remove and replace, so it\u2019s important to carefully consider the transition. For example, if you are using a third-party service to host your videos, you\u2019ll need to move those videos to a new location."),xu.forEach(t),An=u(e),T=o(e,"UL",{});var xa=l(T);Ba=o(xa,"LI",{});var Su=l(Ba);kl=r(Su,"Replace cookies that use state.  Figure out the logic and push forward."),Su.forEach(t),ml=u(xa),$a=o(xa,"LI",{});var Au=l($a);vl=r(Au,"Carefully and tactly remove cookies that are shared by third parties.  The end goal is to look for self hosted solutions that don\u2019t use cookies."),Au.forEach(t),yl=u(xa),Ka=o(xa,"LI",{});var Iu=l(Ka);wl=r(Iu,"If you\u2019re using a third party service that handles all the costs and it\u2019s free: don\u2019t stop looking for alternatives.  There is always a cost.  The cost is your data."),Iu.forEach(t),xa.forEach(t),In=u(e),It=o(e,"P",{});var Gu=l(It);bl=r(Gu,"It\u2019s important to remember that this is a marathon, not a sprint. Don\u2019t try to tackle everything at once, but instead, focus on one step at a time. Pace yourself and don\u2019t stop looking for alternatives. There is always a cost, and it\u2019s your data that\u2019s at stake."),Gu.forEach(t),Gn=u(e),J=o(e,"H2",{id:!0});var Dc=l(J);Z=o(Dc,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var Lu=l(Z);Qa=o(Lu,"SPAN",{class:!0}),l(Qa).forEach(t),Lu.forEach(t),gl=r(Dc,"Replace Youtube Player"),Dc.forEach(t),Ln=u(e),Gt=o(e,"P",{});var Ru=l(Gt);_l=r(Ru,"Keeping the mantra of every site is different - we didn\u2019t have many videos at the time to move off Youtube.  We also didn\u2019t have the source files for the videos we made - so the original data we did not have.  We had to snag all of our data off of Youtube.  And Youtube doesn\u2019t make that easy, it\u2019s messy."),Ru.forEach(t),Rn=u(e),Lt=o(e,"P",{});var Ou=l(Lt);El=r(Ou,"We do not have the original source files so we need to pull this data from Youtube:"),Ou.forEach(t),On=u(e),y=o(e,"UL",{});var Ee=l(y);Ja=o(Ee,"LI",{});var Wu=l(Ja);Tl=r(Wu,"Download all of our videos in the highest quality possible."),Wu.forEach(t),Pl=u(Ee),Za=o(Ee,"LI",{});var qu=l(Za);xl=r(qu,"Download all of the thumbnails associated with the videos."),qu.forEach(t),Sl=u(Ee),Xa=o(Ee,"LI",{});var Cu=l(Xa);Al=r(Cu,"Figure out how to download all of the closed captioning files."),Cu.forEach(t),Il=u(Ee),es=o(Ee,"LI",{});var Nu=l(es);Gl=r(Nu,"Replace Youtube player with a native HTML5 player and wire up analytics."),Nu.forEach(t),Ee.forEach(t),Wn=u(e),q=o(e,"H3",{id:!0});var wi=l(q);X=o(wi,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var Du=l(X);ts=o(Du,"SPAN",{class:!0}),l(ts).forEach(t),Du.forEach(t),Ll=r(wi,"\u2B07\uFE0F "),as=o(wi,"STRONG",{});var Hu=l(as);Rl=r(Hu,"Downloading your videos"),Hu.forEach(t),wi.forEach(t),qn=u(e),Rt=o(e,"P",{});var Mu=l(Rt);Ol=r(Mu,"Within your YouTube Studio account, you can download your videos.  This can be cumbersum and time consuming going through each video and exporting it.  Many websites have thousands of videos on Youtube.  You\u2019re in luck because there are thousands of tools to download YouTube videos."),Mu.forEach(t),Cn=u(e),ee=o(e,"P",{});var bi=l(ee);Wl=r(bi,"To setup an automated means of downloading all your videos, look into various open source libraries and CLI tools.  3ee Games uses python for development.  We\u2019ve used "),Ie=o(bi,"A",{href:!0,rel:!0});var Yu=l(Ie);ql=r(Yu,"https://github.com/pytube/pytube"),Yu.forEach(t),Cl=r(bi,".  See the example below:"),bi.forEach(t),Nn=u(e),Ge=o(e,"PRE",{class:!0});var rh=l(Ge);rh.forEach(t),Dn=u(e),C=o(e,"H3",{id:!0});var gi=l(C);te=o(gi,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var Uu=l(te);ss=o(Uu,"SPAN",{class:!0}),l(ss).forEach(t),Uu.forEach(t),Nl=r(gi,"\u{1F5BC}\uFE0F "),ns=o(gi,"STRONG",{});var Fu=l(ns);Dl=r(Fu,"thumbnails"),Fu.forEach(t),gi.forEach(t),Hn=u(e),ae=o(e,"P",{});var _i=l(ae);Hl=r(_i,"If your YouTube account has custom thumbnails, you can download those as well.  HTML5 supports the "),Le=o(_i,"A",{href:!0,rel:!0});var Vu=l(Le);Ml=r(Vu,"poster attribute"),Vu.forEach(t),Yl=r(_i," on the video tag.  An image will be shown while the video is downloading."),_i.forEach(t),Mn=u(e),Re=o(e,"PRE",{class:!0});var ch=l(Re);ch.forEach(t),Yn=u(e),N=o(e,"H3",{id:!0});var Ei=l(N);se=o(Ei,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var ju=l(se);os=o(ju,"SPAN",{class:!0}),l(os).forEach(t),ju.forEach(t),Ul=r(Ei,"\u{1F4C7} "),is=o(Ei,"STRONG",{});var zu=l(is);Fl=r(zu,"Youtube Captioning"),zu.forEach(t),Ei.forEach(t),Un=u(e),P=o(e,"P",{});var Sa=l(P);Vl=r(Sa,"We used an open source solution: "),Oe=o(Sa,"A",{href:!0,rel:!0});var Bu=l(Oe);jl=r(Bu,"https://github.com/jdepoix/youtube-transcript-api"),Bu.forEach(t),zl=r(Sa,".  Youtube_transcript_api is a CLI that will download captions.  It supports different formatters provide the captioning data in different formats.  Our videos use "),We=o(Sa,"A",{href:!0,rel:!0});var $u=l(We);Bl=r($u,"Web Video Text Tracks Format"),$u.forEach(t),$l=r(Sa," (WebVTT).  With this CLI, it was easy:"),Sa.forEach(t),Fn=u(e),Ot=o(e,"BLOCKQUOTE",{});var Ku=l(Ot);Wt=o(Ku,"PRE",{class:!0});var uh=l(Wt);uh.forEach(t),Ku.forEach(t),Vn=u(e),D=o(e,"H3",{id:!0});var Ti=l(D);ne=o(Ti,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var Qu=l(ne);ls=o(Qu,"SPAN",{class:!0}),l(ls).forEach(t),Qu.forEach(t),Kl=r(Ti,"\u{1F4FA}  "),ps=o(Ti,"STRONG",{});var Ju=l(ps);Ql=r(Ju,"Replace Youtube with native video"),Ju.forEach(t),Ti.forEach(t),jn=u(e),qt=o(e,"P",{});var Zu=l(qt);Jl=r(Zu,"While there are many video players to choose from out in the open source community, we decided to keep it simple, schematic, and native.  Build a player that uses the HTML5 video tag and tracks for closed captioning."),Zu.forEach(t),zn=u(e),x=o(e,"UL",{});var Aa=l(x);rs=o(Aa,"LI",{});var Xu=l(rs);Zl=r(Xu,"Use the HTML5 video tag to play the video."),Xu.forEach(t),Xl=u(Aa),cs=o(Aa,"LI",{});var ef=l(cs);ep=r(ef,"Captioning is handled by the native track tag."),ef.forEach(t),tp=u(Aa),us=o(Aa,"LI",{});var tf=l(us);ap=r(tf,"Wire up analyics to specific events."),tf.forEach(t),Aa.forEach(t),Bn=u(e),oe=o(e,"P",{});var Pi=l(oe);sp=r(Pi,"3ee Games frontend uses "),qe=o(Pi,"A",{href:!0,rel:!0});var af=l(qe);np=r(af,"svelte"),af.forEach(t),op=r(Pi,".  Building a video player component is straight forward.  Simply passing in a video object to the component and it binds the video sources, poster, captioning, and analytics."),Pi.forEach(t),$n=u(e),Ct=o(e,"P",{});var sf=l(Ct);fs=o(sf,"STRONG",{});var nf=l(fs);ip=r(nf,"App.svelte"),nf.forEach(t),sf.forEach(t),Kn=u(e),Ce=o(e,"PRE",{class:!0});var fh=l(Ce);fh.forEach(t),Qn=u(e),Nt=o(e,"P",{});var of=l(Nt);ds=o(of,"STRONG",{});var lf=l(ds);lp=r(lf,"player.svelte"),lf.forEach(t),of.forEach(t),Jn=u(e),Ne=o(e,"PRE",{class:!0});var dh=l(Ne);dh.forEach(t),Zn=u(e),H=o(e,"P",{});var an=l(H);pp=r(an,"View this demo of the video player in "),hs=o(an,"STRONG",{});var pf=l(hs);rp=r(pf,"REPL"),pf.forEach(t),cp=r(an,": "),De=o(an,"A",{href:!0,rel:!0});var rf=l(De);up=r(rf,"Svelte REPL example"),rf.forEach(t),an.forEach(t),Xn=u(e),M=o(e,"H3",{id:!0});var xi=l(M);ie=o(xi,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var cf=l(ie);ks=o(cf,"SPAN",{class:!0}),l(ks).forEach(t),cf.forEach(t),fp=r(xi,"\u{1F4C7} "),ms=o(xi,"STRONG",{});var uf=l(ms);dp=r(uf,"Handle captions"),uf.forEach(t),xi.forEach(t),eo=u(e),S=o(e,"P",{});var Ia=l(S);hp=r(Ia,"Within an HTML5 video tag, you can pass in captioning through the "),He=o(Ia,"A",{href:!0,rel:!0});var ff=l(He);kp=r(ff,"track"),ff.forEach(t),mp=r(Ia," tag.  The track tag is a child of the video tag and is used to provide captions, subtitles, and metadata.  The track tag expects a "),Me=o(Ia,"A",{href:!0,rel:!0});var df=l(Me);vp=r(df,"WebVTT"),df.forEach(t),yp=r(Ia," file.  The WebVTT file is a text file that contains the captioning data."),Ia.forEach(t),to=u(e),Dt=o(e,"P",{});var hf=l(Dt);wp=r(hf,"Curious what a WebVTT file looks like?  Here is an example:"),hf.forEach(t),ao=u(e),Ye=o(e,"PRE",{class:!0});var hh=l(Ye);hh.forEach(t),so=u(e),le=o(e,"P",{});var Si=l(le);bp=r(Si,"WebVTT files follow browser\u2019s "),vs=o(Si,"STRONG",{});var kf=l(vs);gp=r(kf,"cross domain security policy"),kf.forEach(t),_p=r(Si,".  WebVTT files must be on the same domain the web client is on (the website the video tag is created on).  Again, all websites are different and many will fall into the same boat: WebVTT are hosted on a CDN.  There are solutions to this problem and let\u2019s go over a few."),Si.forEach(t),no=u(e),A=o(e,"UL",{});var Ga=l(A);ys=o(Ga,"LI",{});var mf=l(ys);Ep=r(mf,"Create a backend proxy service."),mf.forEach(t),Tp=u(Ga),ws=o(Ga,"LI",{});var vf=l(ws);Pp=r(vf,"Proxy service downloads the WebVTT file from the CDN and returns the contents to the web client."),vf.forEach(t),xp=u(Ga),bs=o(Ga,"LI",{});var yf=l(bs);Sp=r(yf,"Web client passes the captions content to the track tag."),yf.forEach(t),Ga.forEach(t),oo=u(e),Ht=o(e,"P",{});var wf=l(Ht);Ap=r(wf,"Setup a backend service that downloads the WebVTT file from the CDN and returns the contents to the client though an endpoint.  For example, you setup a route the web client asycnronously calls to get the WebVTT file.  For instance:"),wf.forEach(t),io=u(e),Ue=o(e,"PRE",{class:!0});var kh=l(Ue);kh.forEach(t),lo=u(e),Mt=o(e,"P",{});var bf=l(Mt);Ip=r(bf,"Pass the response to the web client\u2019s video track tag and your captions will load and be available within the video player."),bf.forEach(t),po=u(e),Fe=o(e,"BLOCKQUOTE",{class:!0});var gf=l(Fe);pe=o(gf,"P",{class:!0});var Ai=l(pe);Gp=r(Ai,"\u{1F6A8} "),gs=o(Ai,"STRONG",{});var _f=l(gs);Lp=r(_f,"Danger"),_f.forEach(t),Rp=r(Ai,": Setup your proxy services with care.  Never expose an endpoint that takes a url or file path as a parameter."),Ai.forEach(t),gf.forEach(t),ro=u(e),Yt=o(e,"P",{});var Ef=l(Yt);Op=r(Ef,"For example:"),Ef.forEach(t),co=u(e),Ve=o(e,"PRE",{class:!0});var mh=l(Ve);mh.forEach(t),uo=u(e),je=o(e,"P",{});var Hc=l(je);Wp=r(Hc,"This can have terrible security risks and unsafe to proxy since anyone can pass in any url and download any file.  This violates OWASP 10: "),ze=o(Hc,"A",{href:!0,rel:!0});var Tf=l(ze);qp=r(Tf,"A06:2021 \u2013 Vulnerable and Outdated Components"),Tf.forEach(t),Hc.forEach(t),fo=u(e),re=o(e,"P",{});var Ii=l(re);Cp=r(Ii,"Only allow your application permission to call the endpoint.  Unless there is a specific reason, you "),_s=o(Ii,"STRONG",{});var Pf=l(_s);Np=r(Pf,"do not"),Pf.forEach(t),Dp=r(Ii," want to serve a public api where other applications outside your domain can use."),Ii.forEach(t),ho=u(e),ce=o(e,"P",{});var Gi=l(ce);Hp=r(Gi,"A better example would be to use the "),Es=o(Gi,"CODE",{});var xf=l(Es);Mp=r(xf,"id"),xf.forEach(t),Yp=r(Gi," of the video and use that to lookup the WebVTT file:"),Gi.forEach(t),ko=u(e),Be=o(e,"PRE",{class:!0});var vh=l(Be);vh.forEach(t),mo=u(e),$e=o(e,"PRE",{class:!0});var yh=l($e);yh.forEach(t),vo=u(e),ue=o(e,"H2",{id:!0});var Mc=l(ue);fe=o(Mc,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var Sf=l(fe);Ts=o(Sf,"SPAN",{class:!0}),l(Ts).forEach(t),Sf.forEach(t),Up=r(Mc,"Replace Google Analytics"),Mc.forEach(t),yo=u(e),de=o(e,"P",{});var Li=l(de);Fp=r(Li,"3ee Games uses "),Ke=o(Li,"A",{href:!0,rel:!0});var Af=l(Ke);Vp=r(Af,"umami"),Af.forEach(t),jp=r(Li," for analytics.  Umami is open source, doesn\u2019t use cookies, and is self hosted.  Other features include tracking custom events - like what we worked on above with the video player."),Li.forEach(t),wo=u(e),Ut=o(e,"P",{});var If=l(Ut);zp=r(If,"Let\u2019s break down the steps to replace Google Analytics with umami (or any other analytics platform):"),If.forEach(t),bo=u(e),I=o(e,"UL",{});var La=l(I);Ps=o(La,"LI",{});var Gf=l(Ps);Bp=r(Gf,"Plan a way to support both analytics platforms.  This will give you an advantage to compare the data between the two platforms."),Gf.forEach(t),$p=u(La),xs=o(La,"LI",{});var Lf=l(xs);Kp=r(Lf,"Translate, port, or migrate the custom events from Google Analytics to the new platform."),Lf.forEach(t),Qp=u(La),Ss=o(La,"LI",{});var Rf=l(Ss);Jp=r(Rf,"Configure switches to turn on and off each analytics platform."),Rf.forEach(t),La.forEach(t),go=u(e),Ft=o(e,"P",{});var Of=l(Ft);Zp=r(Of,"There are many options to choose from when supporting different analytics platforms.  A common solution is creating a wrapper around the analytics platform.  This wrapper will handle the differences between the two platforms.  For example, the wrapper will handle the differences between the Google Analytics and umami API:"),Of.forEach(t),_o=u(e),Qe=o(e,"PRE",{class:!0});var wh=l(Qe);wh.forEach(t),Eo=u(e),he=o(e,"P",{});var Ri=l(he);Xp=r(Ri,"The wrapper calls "),As=o(Ri,"CODE",{});var Wf=l(As);er=r(Wf,"trackEvent"),Wf.forEach(t),tr=r(Ri," which in turn calls both Google Analytics and umami:"),Ri.forEach(t),To=u(e),Je=o(e,"PRE",{class:!0});var bh=l(Je);bh.forEach(t),Po=u(e),m=o(e,"P",{});var U=l(m);ar=r(U,"Preserving your events and porting them over to the new platform is a tedious task.  Verify the events are working as expected in a networking tool such as the built-in browser networking tools, "),Ze=o(U,"A",{href:!0,rel:!0});var qf=l(Ze);sr=r(qf,"Fiddler"),qf.forEach(t),nr=r(U,", or "),Xe=o(U,"A",{href:!0,rel:!0});var Cf=l(Xe);or=r(Cf,"Charles"),Cf.forEach(t),ir=r(U,".  To see "),Is=o(U,"EM",{});var Nf=l(Is);lr=r(Nf,"only"),Nf.forEach(t),pr=r(U," the requests made to the analytics platform, filter the requests by "),Gs=o(U,"CODE",{});var Df=l(Gs);rr=r(Df,"collect"),Df.forEach(t),U.forEach(t),xo=u(e),et=o(e,"BLOCKQUOTE",{class:!0});var Hf=l(et);Vt=o(Hf,"BLOCKQUOTE",{class:!0});var Mf=l(Vt);jt=o(Mf,"P",{class:!0});var Yf=l(jt);tt=o(Yf,"IMG",{src:!0,alt:!0,title:!0}),Yf.forEach(t),Mf.forEach(t),Hf.forEach(t),So=u(e),zt=o(e,"P",{});var Uf=l(zt);cr=r(Uf,"Now that can use both Google Analytics and umami, we need to configure a switch to turn on and off Google Analytics.  In the example below, we assume umami is working correctly and we create a switch for Google Analytics and only fire the events if the switch is on:"),Uf.forEach(t),Ao=u(e),at=o(e,"PRE",{class:!0});var gh=l(at);gh.forEach(t),Io=u(e),Bt=o(e,"P",{});var Ff=l(Bt);ur=r(Ff,"This allows you to pivot quickly if you need to restore Google Analytics temporarly.  With iteration and time, you can remove the switch and remove Google Analytics from your codebase.  Since we are using a wrapper, we can easily remove the Google Analytics code from the wrapper:"),Ff.forEach(t),Go=u(e),st=o(e,"PRE",{class:!0});var _h=l(st);_h.forEach(t),Lo=u(e),$t=o(e,"P",{});var Vf=l($t);fr=r(Vf,"At this point, we have moved to our new platform.  Now it\u2019s time to update your privacy policy and remove all references to Google Analytics!  Whether you decided to use umami or another analytics platform, you\u2019re now in control of your data."),Vf.forEach(t),Ro=u(e),nt=o(e,"BLOCKQUOTE",{class:!0});var jf=l(nt);Kt=o(jf,"BLOCKQUOTE",{class:!0});var zf=l(Kt);Qt=o(zf,"P",{class:!0});var Bf=l(Qt);ot=o(Bf,"IMG",{src:!0,alt:!0,title:!0}),Bf.forEach(t),zf.forEach(t),jf.forEach(t),Oo=u(e),Y=o(e,"H3",{id:!0});var Oi=l(Y);ke=o(Oi,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var $f=l(ke);Ls=o($f,"SPAN",{class:!0}),l(Ls).forEach(t),$f.forEach(t),dr=r(Oi,"\u{1F4CA} "),Rs=o(Oi,"STRONG",{});var Kf=l(Rs);hr=r(Kf,"Wire up analytics"),Kf.forEach(t),Oi.forEach(t),Wo=u(e),it=o(e,"BLOCKQUOTE",{class:!0});var Qf=l(it);Jt=o(Qf,"P",{class:!0});var Jf=l(Jt);kr=r(Jf,"We are able to use our cloud technology to serve umami on premise with kubernetes and scale to the cloud if needed.  This way we aren\u2019t paying cloud providers when we\u2019re not scaling."),Jf.forEach(t),Qf.forEach(t),qo=u(e),G=o(e,"P",{});var Ra=l(G);mr=r(Ra,"We already have umami in place.  For this simple video player, we wired up umami to the "),Os=o(Ra,"CODE",{});var Zf=l(Os);vr=r(Zf,"play"),Zf.forEach(t),yr=r(Ra," and "),Ws=o(Ra,"CODE",{});var Xf=l(Ws);wr=r(Xf,"end"),Xf.forEach(t),br=r(Ra," events."),Ra.forEach(t),Co=u(e),lt=o(e,"BLOCKQUOTE",{class:!0});var ed=l(lt);Zt=o(ed,"BLOCKQUOTE",{class:!0});var td=l(Zt);Xt=o(td,"P",{class:!0});var ad=l(Xt);pt=o(ad,"IMG",{src:!0,alt:!0,title:!0}),ad.forEach(t),td.forEach(t),ed.forEach(t),No=u(e),ea=o(e,"P",{});var sd=l(ea);gr=r(sd,"As we finish building the video player, test your videos across different browsers and devices.  Make sure the video player is working as expected.  If you\u2019re using a proxy service to download the WebVTT file, make sure the proxy service is working as expected."),sd.forEach(t),Do=u(e),ta=o(e,"P",{});var nd=l(ta);_r=r(nd,"Finally, remove the tracker from your website: If you\u2019re using Google Tag Manager, you can remove the tracker from the container.  If you\u2019re using Google Analytics directly, you can remove the script tag from your website."),nd.forEach(t),Ho=u(e),me=o(e,"H2",{id:!0});var Yc=l(me);ve=o(Yc,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var od=l(ve);qs=o(od,"SPAN",{class:!0}),l(qs).forEach(t),od.forEach(t),Er=r(Yc,"From cookies to LocalStorage"),Yc.forEach(t),Mo=u(e),aa=o(e,"P",{});var id=l(aa);Tr=r(id,"Local Storage is a better alternative to state cookies for performance, privacy, and GDPR compliance. Here are some reasons why:"),id.forEach(t),Yo=u(e),L=o(e,"UL",{});var Oa=l(L);sa=o(Oa,"LI",{});var Uc=l(sa);Cs=o(Uc,"STRONG",{});var ld=l(Cs);Pr=r(ld,"Performance"),ld.forEach(t),xr=r(Uc,": LocalStorage is faster than cookies because it\u2019s stored on the client-side, eliminating the need to send data back and forth between the server and client with every request/response. Since cookies are sent with every request, they increase network traffic and slow down the page load time."),Uc.forEach(t),Sr=u(Oa),na=o(Oa,"LI",{});var Fc=l(na);Ns=o(Fc,"STRONG",{});var pd=l(Ns);Ar=r(pd,"Privacy"),pd.forEach(t),Ir=r(Fc,": Cookies are often used to track user behavior and preferences, and they can be easily accessed by third-party scripts. In contrast, LocalStorage data is only accessible by the domain that created it, making it a more secure option for storing user state."),Fc.forEach(t),Gr=u(Oa),oa=o(Oa,"LI",{});var Vc=l(oa);Ds=o(Vc,"STRONG",{});var rd=l(Ds);Lr=r(rd,"GDPR compliance"),rd.forEach(t),Rr=r(Vc,": The General Data Protection Regulation (GDPR) requires websites to obtain user consent before storing any personal data. With LocalStorage, it\u2019s easier to obtain and manage user consent since it only stores data for a specific website. Cookies, on the other hand, can be shared across different domains, making it difficult to obtain user consent and comply with GDPR regulations."),Vc.forEach(t),Oa.forEach(t),Uo=u(e),ia=o(e,"P",{});var cd=l(ia);Or=r(cd,"In this example, we have a service that rechieves a user\u2019s mute preference.  We store in it a cookie and use it across the application:"),cd.forEach(t),Fo=u(e),rt=o(e,"PRE",{class:!0});var Eh=l(rt);Eh.forEach(t),Vo=u(e),la=o(e,"P",{});var ud=l(la);Wr=r(ud,"Porting this over to local storage:"),ud.forEach(t),jo=u(e),ct=o(e,"PRE",{class:!0});var Th=l(ct);Th.forEach(t),zo=u(e),R=o(e,"P",{});var Wa=l(R);qr=r(Wa,"Now we\u2019ll take it further and store an object in local storage by using "),Hs=o(Wa,"CODE",{});var fd=l(Hs);Cr=r(fd,"JSON.stringify"),fd.forEach(t),Nr=r(Wa," and "),Ms=o(Wa,"CODE",{});var dd=l(Ms);Dr=r(dd,"JSON.parse"),dd.forEach(t),Hr=r(Wa,":"),Wa.forEach(t),Bo=u(e),ut=o(e,"PRE",{class:!0});var Ph=l(ut);Ph.forEach(t),$o=u(e),ye=o(e,"H2",{id:!0});var jc=l(ye);we=o(jc,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var hd=l(we);Ys=o(hd,"SPAN",{class:!0}),l(Ys).forEach(t),hd.forEach(t),Mr=r(jc,"Updating privacy policies"),jc.forEach(t),Ko=u(e),O=o(e,"P",{});var qa=l(O);Yr=r(qa,"In terms of privacy laws, many countries have specific regulations that require website owners to inform users about how their personal data is being collected, processed, and stored. For example, the General Data Protection Regulation (GDPR) in the European Union requires that websites provide "),Us=o(qa,"STRONG",{});var kd=l(Us);Ur=r(kd,"clear"),kd.forEach(t),Fr=r(qa," and "),Fs=o(qa,"STRONG",{});var md=l(Fs);Vr=r(md,"transparent"),md.forEach(t),jr=r(qa," information about how user state is being collected and used."),qa.forEach(t),Qo=u(e),pa=o(e,"P",{});var vd=l(pa);zr=r(vd,"Update the use of local storage in your privacy policy. Aim to be transparent about local storage usage: builds trust with users and ensures that you are complying with relevant privacy laws and regulations."),vd.forEach(t),Jo=u(e),be=o(e,"H2",{id:!0});var zc=l(be);ge=o(zc,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var yd=l(ge);Vs=o(yd,"SPAN",{class:!0}),l(Vs).forEach(t),yd.forEach(t),Br=r(zc,"The cost of first party"),zc.forEach(t),Zo=u(e),ra=o(e,"P",{});var wd=l(ra);$r=r(wd,"Moving off a third party vendor and self-hosting can have both financial and technical implications that need to be carefully considered before making a decision."),wd.forEach(t),Xo=u(e),ca=o(e,"P",{});var bd=l(ca);Kr=r(bd,"The first fincial desision is figuring out the initial investment required to set up and maintain a self-hosted solution."),bd.forEach(t),ei=u(e),ua=o(e,"P",{});var gd=l(ua);Qr=r(gd,"This includes the cost of hardware, software, and personnel to manage the system. For example, if a company is using a third party customer relationship management (CRM) tool and decides to move to a self-hosted solution, they will need to purchase and maintain the servers, databases, and software necessary to run the system."),gd.forEach(t),ti=u(e),fa=o(e,"P",{});var _d=l(fa);Jr=r(_d,"Another cost to consider is the ongoing maintenance and support of the self-hosted solution. This includes updates, patches, and security measures to ensure the system is up to date and secure. This can be a significant burden on internal IT staff, which may require additional training or hiring of dedicated personnel."),_d.forEach(t),ai=u(e),da=o(e,"P",{});var Ed=l(da);Zr=r(Ed,"Take our real world use case where we are using Umami instead of Google Analytics, here are new maintenance tasks:"),Ed.forEach(t),si=u(e),w=o(e,"UL",{});var Te=l(w);js=o(Te,"LI",{});var Td=l(js);Xr=r(Td,"Manage upgrades: regularly maintain security and features."),Td.forEach(t),ec=u(Te),zs=o(Te,"LI",{});var Pd=l(zs);tc=r(Pd,"Update SSL certificates."),Pd.forEach(t),ac=u(Te),Bs=o(Te,"LI",{});var xd=l(Bs);sc=r(xd,"Manage backups."),xd.forEach(t),nc=u(Te),$s=o(Te,"LI",{});var Sd=l($s);oc=r(Sd,"Monitor uptime: You need visiblity when your platform is down."),Sd.forEach(t),Te.forEach(t),ni=u(e),_e=o(e,"P",{});var Wi=l(_e);ic=r(Wi,"This looks complicated at first glance but with proper planning around architecture, we are able to execute all these items without hassle: "),Ks=o(Wi,"STRONG",{});var Ad=l(Ks);lc=r(Ad,"by using containerization"),Ad.forEach(t),pc=r(Wi," to simplify and automate our application deployment process. It helps us gain better visibility and consistency across different environments."),Wi.forEach(t),oi=u(e),W=o(e,"P",{});var Ca=l(W);rc=r(Ca,"By automating various tasks like provisioning, scaling, and monitoring, we can "),Qs=o(Ca,"EM",{});var Id=l(Qs);cc=r(Id,"quickly"),Id.forEach(t),uc=r(Ca," respond to changes in demand and "),Js=o(Ca,"EM",{});var Gd=l(Js);fc=r(Gd,"optimize"),Gd.forEach(t),dc=r(Ca," our infrastructure usage."),Ca.forEach(t),ii=u(e),ha=o(e,"P",{});var Ld=l(ha);hc=r(Ld,"In addition to the financial costs, there are also technical implications to consider when moving off a third party vendor."),Ld.forEach(t),li=u(e),ka=o(e,"P",{});var Rd=l(ka);kc=r(Rd,"Another example is email - email can be tough to handle yourself: if a company is using a third party email marketing platform and decides to move to a self-hosted email marketing solution, they will need to ensure that their email servers are configured properly to avoid being flagged as spam."),Rd.forEach(t),pi=u(e),ma=o(e,"P",{});var Od=l(ma);mc=r(Od,"This requires technical expertise and ongoing monitoring to maintain good email deliverability.  In this case, we would rather have a third party that handles those headaches for us."),Od.forEach(t),ri=u(e),ft=o(e,"BLOCKQUOTE",{class:!0});var Wd=l(ft);va=o(Wd,"P",{class:!0});var qd=l(va);vc=r(qd,"If you\u2019re interested in calculating the costs of moving off of Youtube, take a deep look into your channel\u2019s analytics to get a solid understand of the costs involved around usage."),qd.forEach(t),Wd.forEach(t),ci=u(e),ya=o(e,"P",{});var Cd=l(ya);yc=r(Cd,"When analyzing YouTube analytics to determine the cost of moving off YouTube to your own CDN, highlight the following:"),Cd.forEach(t),ui=u(e),b=o(e,"UL",{});var Pe=l(b);wa=o(Pe,"LI",{});var Bc=l(wa);Zs=o(Bc,"STRONG",{});var Nd=l(Zs);wc=r(Nd,"Engagement"),Nd.forEach(t),bc=r(Bc,": how much traffic is the channel receiving?"),Bc.forEach(t),gc=u(Pe),ba=o(Pe,"LI",{});var $c=l(ba);Xs=o($c,"STRONG",{});var Dd=l(Xs);_c=r(Dd,"Geographic"),Dd.forEach(t),Ec=r($c,": determine where the audience is located. Important to factor which regions to setup your CDN."),$c.forEach(t),Tc=u(Pe),ga=o(Pe,"LI",{});var Kc=l(ga);en=o(Kc,"STRONG",{});var Hd=l(en);Pc=r(Hd,"Revenue"),Hd.forEach(t),xc=r(Kc,": income being generated through advertising."),Kc.forEach(t),Sc=u(Pe),_a=o(Pe,"LI",{});var Qc=l(_a);tn=o(Qc,"STRONG",{});var Md=l(tn);Ac=r(Md,"Device and platform"),Md.forEach(t),Ic=r(Qc,": figure out how to optimize content delivery."),Qc.forEach(t),Pe.forEach(t),fi=u(e),Ea=o(e,"P",{});var Yd=l(Ea);Gc=r(Yd,"These metrics provide valuable insights to determine the feasibility of moving off YouTube to another CDN."),Yd.forEach(t),di=u(e),Ta=o(e,"P",{});var Ud=l(Ta);Lc=r(Ud,"Ultimately, the decision to move off a vendor and self-host depends on the specific needs and resources of the company. While self-hosting may offer more control and customization, it can also require significant financial and technical investments."),Ud.forEach(t),hi=u(e),ki=o(e,"HR",{}),this.h()},h(){f(Na,"class","icon icon-link"),f(V,"aria-hidden","true"),f(V,"tabindex","-1"),f(V,"href","#first-party-centric-built-in-privacy"),f(F,"id","first-party-centric-built-in-privacy"),f(mt,"href","/account/accessibility/"),f(Da,"class","icon icon-link"),f(B,"aria-hidden","true"),f(B,"tabindex","-1"),f(B,"href","#how-did-we-get-here"),f(z,"id","how-did-we-get-here"),f(Ua,"class","icon icon-link"),f(K,"aria-hidden","true"),f(K,"tabindex","-1"),f(K,"href","#identify-all-cookies"),f($,"id","identify-all-cookies"),f(Qa,"class","icon icon-link"),f(Z,"aria-hidden","true"),f(Z,"tabindex","-1"),f(Z,"href","#replace-youtube-player"),f(J,"id","replace-youtube-player"),f(ts,"class","icon icon-link"),f(X,"aria-hidden","true"),f(X,"tabindex","-1"),f(X,"href","#\uFE0F-downloading-your-videos"),f(q,"id","\uFE0F-downloading-your-videos"),f(Ie,"href","https://github.com/pytube/pytube"),f(Ie,"rel","nofollow"),f(Ge,"class","language-python"),f(ss,"class","icon icon-link"),f(te,"aria-hidden","true"),f(te,"tabindex","-1"),f(te,"href","#\uFE0F-thumbnails"),f(C,"id","\uFE0F-thumbnails"),f(Le,"href","https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#attr-poster"),f(Le,"rel","nofollow"),f(Re,"class","language-html"),f(os,"class","icon icon-link"),f(se,"aria-hidden","true"),f(se,"tabindex","-1"),f(se,"href","#-youtube-captioning"),f(N,"id","-youtube-captioning"),f(Oe,"href","https://github.com/jdepoix/youtube-transcript-api"),f(Oe,"rel","nofollow"),f(We,"href","https://developer.mozilla.org/en-US/docs/Web/API/WebVTT_API"),f(We,"rel","nofollow"),f(Wt,"class","language-bash"),f(ls,"class","icon icon-link"),f(ne,"aria-hidden","true"),f(ne,"tabindex","-1"),f(ne,"href","#--replace-youtube-with-native-video"),f(D,"id","--replace-youtube-with-native-video"),f(qe,"href","https://svelte.dev/"),f(qe,"rel","nofollow"),f(Ce,"class","language-html"),f(Ne,"class","language-html"),f(De,"href","https://svelte.dev/repl/fc7e80bc1e9c4953803971c73dc2ee15?version=3.52.0"),f(De,"rel","nofollow"),f(ks,"class","icon icon-link"),f(ie,"aria-hidden","true"),f(ie,"tabindex","-1"),f(ie,"href","#-handle-captions"),f(M,"id","-handle-captions"),f(He,"href","https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track"),f(He,"rel","nofollow"),f(Me,"href","https://developer.mozilla.org/en-US/docs/Web/API/WebVTT_API"),f(Me,"rel","nofollow"),f(Ye,"class","language-txt"),f(Ue,"class","language-bash"),f(pe,"class","svelte-18ree9t"),f(Fe,"class","svelte-18ree9t"),f(Ve,"class","language-bash"),f(ze,"href","https://owasp.org/Top10/A06_2021-Vulnerable_and_Outdated_Components/"),f(ze,"rel","nofollow"),f(Be,"class","language-bash"),f($e,"class","language-sql"),f(Ts,"class","icon icon-link"),f(fe,"aria-hidden","true"),f(fe,"tabindex","-1"),f(fe,"href","#replace-google-analytics"),f(ue,"id","replace-google-analytics"),f(Ke,"href","https://umami.is/"),f(Ke,"rel","nofollow"),f(Qe,"class","language-javascript"),f(Je,"class","language-javascript"),f(Ze,"href","https://www.telerik.com/fiddler"),f(Ze,"rel","nofollow"),f(Xe,"href","https://www.charlesproxy.com/"),f(Xe,"rel","nofollow"),Jc(tt.src,Xc="https://3ee.s3.amazonaws.com/img/blog_network.webp")||f(tt,"src",Xc),f(tt,"alt","Check networking to see if events are working."),f(tt,"title","Check networking to see if events are working."),f(jt,"class","svelte-18ree9t"),f(Vt,"class","svelte-18ree9t"),f(et,"class","svelte-18ree9t"),f(at,"class","language-javascript"),f(st,"class","language-javascript"),Jc(ot.src,eu="https://3ee.s3.amazonaws.com/img/blog_umami2.webp")||f(ot,"src",eu),f(ot,"alt","Umami Dashboard."),f(ot,"title","Umami Dashboard."),f(Qt,"class","svelte-18ree9t"),f(Kt,"class","svelte-18ree9t"),f(nt,"class","svelte-18ree9t"),f(Ls,"class","icon icon-link"),f(ke,"aria-hidden","true"),f(ke,"tabindex","-1"),f(ke,"href","#-wire-up-analytics"),f(Y,"id","-wire-up-analytics"),f(Jt,"class","svelte-18ree9t"),f(it,"class","svelte-18ree9t"),Jc(pt.src,tu="https://3ee.s3.amazonaws.com/img/blog_umami.webp")||f(pt,"src",tu),f(pt,"alt","Umami's dashboard showing the video events."),f(pt,"title","Umami's dashboard showing the video events."),f(Xt,"class","svelte-18ree9t"),f(Zt,"class","svelte-18ree9t"),f(lt,"class","svelte-18ree9t"),f(qs,"class","icon icon-link"),f(ve,"aria-hidden","true"),f(ve,"tabindex","-1"),f(ve,"href","#from-cookies-to-localstorage"),f(me,"id","from-cookies-to-localstorage"),f(rt,"class","language-javascript"),f(ct,"class","language-javascript"),f(ut,"class","language-javascript"),f(Ys,"class","icon icon-link"),f(we,"aria-hidden","true"),f(we,"tabindex","-1"),f(we,"href","#updating-privacy-policies"),f(ye,"id","updating-privacy-policies"),f(Vs,"class","icon icon-link"),f(ge,"aria-hidden","true"),f(ge,"tabindex","-1"),f(ge,"href","#the-cost-of-first-party"),f(be,"id","the-cost-of-first-party"),f(va,"class","svelte-18ree9t"),f(ft,"class","svelte-18ree9t")},m(e,s){i(e,d,s),a(d,g),i(e,_,s),i(e,v,s),a(v,h),a(v,k),a(k,ht),a(v,qi),i(e,sn,s),i(e,nn,s),i(e,on,s),i(e,F,s),a(F,V),a(V,Na),a(F,Ci),i(e,ln,s),i(e,kt,s),a(kt,Ni),i(e,pn,s),i(e,j,s),a(j,Di),a(j,mt),a(mt,Hi),a(j,Mi),i(e,rn,s),i(e,z,s),a(z,B),a(B,Da),a(z,Yi),i(e,cn,s),i(e,vt,s),a(vt,Ui),i(e,un,s),i(e,yt,s),a(yt,Fi),i(e,fn,s),i(e,wt,s),a(wt,Vi),i(e,dn,s),i(e,bt,s),a(bt,ji),i(e,hn,s),i(e,E,s),a(E,Ha),a(Ha,zi),a(E,Bi),a(E,Ma),a(Ma,$i),a(E,Ki),a(E,Ya),a(Ya,Qi),i(e,kn,s),i(e,gt,s),a(gt,Ji),i(e,mn,s),i(e,_t,s),a(_t,Zi),i(e,vn,s),i(e,Et,s),a(Et,Xi),i(e,yn,s),i(e,$,s),a($,K),a(K,Ua),a($,el),i(e,wn,s),i(e,Tt,s),a(Tt,tl),i(e,bn,s),i(e,Q,s),a(Q,al),a(Q,Fa),a(Fa,sl),a(Q,nl),i(e,gn,s),i(e,xe,s),a(xe,Va),a(Va,ol),a(xe,il),i(e,_n,s),i(e,Pt,s),a(Pt,ll),i(e,En,s),i(e,xt,s),a(xt,pl),i(e,Tn,s),i(e,Se,s),a(Se,ja),a(ja,rl),a(Se,cl),i(e,Pn,s),i(e,St,s),a(St,ul),i(e,xn,s),i(e,Ae,s),a(Ae,za),a(za,fl),a(Ae,dl),i(e,Sn,s),i(e,At,s),a(At,hl),i(e,An,s),i(e,T,s),a(T,Ba),a(Ba,kl),a(T,ml),a(T,$a),a($a,vl),a(T,yl),a(T,Ka),a(Ka,wl),i(e,In,s),i(e,It,s),a(It,bl),i(e,Gn,s),i(e,J,s),a(J,Z),a(Z,Qa),a(J,gl),i(e,Ln,s),i(e,Gt,s),a(Gt,_l),i(e,Rn,s),i(e,Lt,s),a(Lt,El),i(e,On,s),i(e,y,s),a(y,Ja),a(Ja,Tl),a(y,Pl),a(y,Za),a(Za,xl),a(y,Sl),a(y,Xa),a(Xa,Al),a(y,Il),a(y,es),a(es,Gl),i(e,Wn,s),i(e,q,s),a(q,X),a(X,ts),a(q,Ll),a(q,as),a(as,Rl),i(e,qn,s),i(e,Rt,s),a(Rt,Ol),i(e,Cn,s),i(e,ee,s),a(ee,Wl),a(ee,Ie),a(Ie,ql),a(ee,Cl),i(e,Nn,s),i(e,Ge,s),Ge.innerHTML=zd,i(e,Dn,s),i(e,C,s),a(C,te),a(te,ss),a(C,Nl),a(C,ns),a(ns,Dl),i(e,Hn,s),i(e,ae,s),a(ae,Hl),a(ae,Le),a(Le,Ml),a(ae,Yl),i(e,Mn,s),i(e,Re,s),Re.innerHTML=Bd,i(e,Yn,s),i(e,N,s),a(N,se),a(se,os),a(N,Ul),a(N,is),a(is,Fl),i(e,Un,s),i(e,P,s),a(P,Vl),a(P,Oe),a(Oe,jl),a(P,zl),a(P,We),a(We,Bl),a(P,$l),i(e,Fn,s),i(e,Ot,s),a(Ot,Wt),Wt.innerHTML=$d,i(e,Vn,s),i(e,D,s),a(D,ne),a(ne,ls),a(D,Kl),a(D,ps),a(ps,Ql),i(e,jn,s),i(e,qt,s),a(qt,Jl),i(e,zn,s),i(e,x,s),a(x,rs),a(rs,Zl),a(x,Xl),a(x,cs),a(cs,ep),a(x,tp),a(x,us),a(us,ap),i(e,Bn,s),i(e,oe,s),a(oe,sp),a(oe,qe),a(qe,np),a(oe,op),i(e,$n,s),i(e,Ct,s),a(Ct,fs),a(fs,ip),i(e,Kn,s),i(e,Ce,s),Ce.innerHTML=Kd,i(e,Qn,s),i(e,Nt,s),a(Nt,ds),a(ds,lp),i(e,Jn,s),i(e,Ne,s),Ne.innerHTML=Qd,i(e,Zn,s),i(e,H,s),a(H,pp),a(H,hs),a(hs,rp),a(H,cp),a(H,De),a(De,up),i(e,Xn,s),i(e,M,s),a(M,ie),a(ie,ks),a(M,fp),a(M,ms),a(ms,dp),i(e,eo,s),i(e,S,s),a(S,hp),a(S,He),a(He,kp),a(S,mp),a(S,Me),a(Me,vp),a(S,yp),i(e,to,s),i(e,Dt,s),a(Dt,wp),i(e,ao,s),i(e,Ye,s),Ye.innerHTML=Jd,i(e,so,s),i(e,le,s),a(le,bp),a(le,vs),a(vs,gp),a(le,_p),i(e,no,s),i(e,A,s),a(A,ys),a(ys,Ep),a(A,Tp),a(A,ws),a(ws,Pp),a(A,xp),a(A,bs),a(bs,Sp),i(e,oo,s),i(e,Ht,s),a(Ht,Ap),i(e,io,s),i(e,Ue,s),Ue.innerHTML=Zd,i(e,lo,s),i(e,Mt,s),a(Mt,Ip),i(e,po,s),i(e,Fe,s),a(Fe,pe),a(pe,Gp),a(pe,gs),a(gs,Lp),a(pe,Rp),i(e,ro,s),i(e,Yt,s),a(Yt,Op),i(e,co,s),i(e,Ve,s),Ve.innerHTML=Xd,i(e,uo,s),i(e,je,s),a(je,Wp),a(je,ze),a(ze,qp),i(e,fo,s),i(e,re,s),a(re,Cp),a(re,_s),a(_s,Np),a(re,Dp),i(e,ho,s),i(e,ce,s),a(ce,Hp),a(ce,Es),a(Es,Mp),a(ce,Yp),i(e,ko,s),i(e,Be,s),Be.innerHTML=eh,i(e,mo,s),i(e,$e,s),$e.innerHTML=th,i(e,vo,s),i(e,ue,s),a(ue,fe),a(fe,Ts),a(ue,Up),i(e,yo,s),i(e,de,s),a(de,Fp),a(de,Ke),a(Ke,Vp),a(de,jp),i(e,wo,s),i(e,Ut,s),a(Ut,zp),i(e,bo,s),i(e,I,s),a(I,Ps),a(Ps,Bp),a(I,$p),a(I,xs),a(xs,Kp),a(I,Qp),a(I,Ss),a(Ss,Jp),i(e,go,s),i(e,Ft,s),a(Ft,Zp),i(e,_o,s),i(e,Qe,s),Qe.innerHTML=ah,i(e,Eo,s),i(e,he,s),a(he,Xp),a(he,As),a(As,er),a(he,tr),i(e,To,s),i(e,Je,s),Je.innerHTML=sh,i(e,Po,s),i(e,m,s),a(m,ar),a(m,Ze),a(Ze,sr),a(m,nr),a(m,Xe),a(Xe,or),a(m,ir),a(m,Is),a(Is,lr),a(m,pr),a(m,Gs),a(Gs,rr),i(e,xo,s),i(e,et,s),a(et,Vt),a(Vt,jt),a(jt,tt),i(e,So,s),i(e,zt,s),a(zt,cr),i(e,Ao,s),i(e,at,s),at.innerHTML=nh,i(e,Io,s),i(e,Bt,s),a(Bt,ur),i(e,Go,s),i(e,st,s),st.innerHTML=oh,i(e,Lo,s),i(e,$t,s),a($t,fr),i(e,Ro,s),i(e,nt,s),a(nt,Kt),a(Kt,Qt),a(Qt,ot),i(e,Oo,s),i(e,Y,s),a(Y,ke),a(ke,Ls),a(Y,dr),a(Y,Rs),a(Rs,hr),i(e,Wo,s),i(e,it,s),a(it,Jt),a(Jt,kr),i(e,qo,s),i(e,G,s),a(G,mr),a(G,Os),a(Os,vr),a(G,yr),a(G,Ws),a(Ws,wr),a(G,br),i(e,Co,s),i(e,lt,s),a(lt,Zt),a(Zt,Xt),a(Xt,pt),i(e,No,s),i(e,ea,s),a(ea,gr),i(e,Do,s),i(e,ta,s),a(ta,_r),i(e,Ho,s),i(e,me,s),a(me,ve),a(ve,qs),a(me,Er),i(e,Mo,s),i(e,aa,s),a(aa,Tr),i(e,Yo,s),i(e,L,s),a(L,sa),a(sa,Cs),a(Cs,Pr),a(sa,xr),a(L,Sr),a(L,na),a(na,Ns),a(Ns,Ar),a(na,Ir),a(L,Gr),a(L,oa),a(oa,Ds),a(Ds,Lr),a(oa,Rr),i(e,Uo,s),i(e,ia,s),a(ia,Or),i(e,Fo,s),i(e,rt,s),rt.innerHTML=ih,i(e,Vo,s),i(e,la,s),a(la,Wr),i(e,jo,s),i(e,ct,s),ct.innerHTML=lh,i(e,zo,s),i(e,R,s),a(R,qr),a(R,Hs),a(Hs,Cr),a(R,Nr),a(R,Ms),a(Ms,Dr),a(R,Hr),i(e,Bo,s),i(e,ut,s),ut.innerHTML=ph,i(e,$o,s),i(e,ye,s),a(ye,we),a(we,Ys),a(ye,Mr),i(e,Ko,s),i(e,O,s),a(O,Yr),a(O,Us),a(Us,Ur),a(O,Fr),a(O,Fs),a(Fs,Vr),a(O,jr),i(e,Qo,s),i(e,pa,s),a(pa,zr),i(e,Jo,s),i(e,be,s),a(be,ge),a(ge,Vs),a(be,Br),i(e,Zo,s),i(e,ra,s),a(ra,$r),i(e,Xo,s),i(e,ca,s),a(ca,Kr),i(e,ei,s),i(e,ua,s),a(ua,Qr),i(e,ti,s),i(e,fa,s),a(fa,Jr),i(e,ai,s),i(e,da,s),a(da,Zr),i(e,si,s),i(e,w,s),a(w,js),a(js,Xr),a(w,ec),a(w,zs),a(zs,tc),a(w,ac),a(w,Bs),a(Bs,sc),a(w,nc),a(w,$s),a($s,oc),i(e,ni,s),i(e,_e,s),a(_e,ic),a(_e,Ks),a(Ks,lc),a(_e,pc),i(e,oi,s),i(e,W,s),a(W,rc),a(W,Qs),a(Qs,cc),a(W,uc),a(W,Js),a(Js,fc),a(W,dc),i(e,ii,s),i(e,ha,s),a(ha,hc),i(e,li,s),i(e,ka,s),a(ka,kc),i(e,pi,s),i(e,ma,s),a(ma,mc),i(e,ri,s),i(e,ft,s),a(ft,va),a(va,vc),i(e,ci,s),i(e,ya,s),a(ya,yc),i(e,ui,s),i(e,b,s),a(b,wa),a(wa,Zs),a(Zs,wc),a(wa,bc),a(b,gc),a(b,ba),a(ba,Xs),a(Xs,_c),a(ba,Ec),a(b,Tc),a(b,ga),a(ga,en),a(en,Pc),a(ga,xc),a(b,Sc),a(b,_a),a(_a,tn),a(tn,Ac),a(_a,Ic),i(e,fi,s),i(e,Ea,s),a(Ea,Gc),i(e,di,s),i(e,Ta,s),a(Ta,Lc),i(e,hi,s),i(e,ki,s)},p:Ch,d(e){e&&t(d),e&&t(_),e&&t(v),e&&t(sn),e&&t(nn),e&&t(on),e&&t(F),e&&t(ln),e&&t(kt),e&&t(pn),e&&t(j),e&&t(rn),e&&t(z),e&&t(cn),e&&t(vt),e&&t(un),e&&t(yt),e&&t(fn),e&&t(wt),e&&t(dn),e&&t(bt),e&&t(hn),e&&t(E),e&&t(kn),e&&t(gt),e&&t(mn),e&&t(_t),e&&t(vn),e&&t(Et),e&&t(yn),e&&t($),e&&t(wn),e&&t(Tt),e&&t(bn),e&&t(Q),e&&t(gn),e&&t(xe),e&&t(_n),e&&t(Pt),e&&t(En),e&&t(xt),e&&t(Tn),e&&t(Se),e&&t(Pn),e&&t(St),e&&t(xn),e&&t(Ae),e&&t(Sn),e&&t(At),e&&t(An),e&&t(T),e&&t(In),e&&t(It),e&&t(Gn),e&&t(J),e&&t(Ln),e&&t(Gt),e&&t(Rn),e&&t(Lt),e&&t(On),e&&t(y),e&&t(Wn),e&&t(q),e&&t(qn),e&&t(Rt),e&&t(Cn),e&&t(ee),e&&t(Nn),e&&t(Ge),e&&t(Dn),e&&t(C),e&&t(Hn),e&&t(ae),e&&t(Mn),e&&t(Re),e&&t(Yn),e&&t(N),e&&t(Un),e&&t(P),e&&t(Fn),e&&t(Ot),e&&t(Vn),e&&t(D),e&&t(jn),e&&t(qt),e&&t(zn),e&&t(x),e&&t(Bn),e&&t(oe),e&&t($n),e&&t(Ct),e&&t(Kn),e&&t(Ce),e&&t(Qn),e&&t(Nt),e&&t(Jn),e&&t(Ne),e&&t(Zn),e&&t(H),e&&t(Xn),e&&t(M),e&&t(eo),e&&t(S),e&&t(to),e&&t(Dt),e&&t(ao),e&&t(Ye),e&&t(so),e&&t(le),e&&t(no),e&&t(A),e&&t(oo),e&&t(Ht),e&&t(io),e&&t(Ue),e&&t(lo),e&&t(Mt),e&&t(po),e&&t(Fe),e&&t(ro),e&&t(Yt),e&&t(co),e&&t(Ve),e&&t(uo),e&&t(je),e&&t(fo),e&&t(re),e&&t(ho),e&&t(ce),e&&t(ko),e&&t(Be),e&&t(mo),e&&t($e),e&&t(vo),e&&t(ue),e&&t(yo),e&&t(de),e&&t(wo),e&&t(Ut),e&&t(bo),e&&t(I),e&&t(go),e&&t(Ft),e&&t(_o),e&&t(Qe),e&&t(Eo),e&&t(he),e&&t(To),e&&t(Je),e&&t(Po),e&&t(m),e&&t(xo),e&&t(et),e&&t(So),e&&t(zt),e&&t(Ao),e&&t(at),e&&t(Io),e&&t(Bt),e&&t(Go),e&&t(st),e&&t(Lo),e&&t($t),e&&t(Ro),e&&t(nt),e&&t(Oo),e&&t(Y),e&&t(Wo),e&&t(it),e&&t(qo),e&&t(G),e&&t(Co),e&&t(lt),e&&t(No),e&&t(ea),e&&t(Do),e&&t(ta),e&&t(Ho),e&&t(me),e&&t(Mo),e&&t(aa),e&&t(Yo),e&&t(L),e&&t(Uo),e&&t(ia),e&&t(Fo),e&&t(rt),e&&t(Vo),e&&t(la),e&&t(jo),e&&t(ct),e&&t(zo),e&&t(R),e&&t(Bo),e&&t(ut),e&&t($o),e&&t(ye),e&&t(Ko),e&&t(O),e&&t(Qo),e&&t(pa),e&&t(Jo),e&&t(be),e&&t(Zo),e&&t(ra),e&&t(Xo),e&&t(ca),e&&t(ei),e&&t(ua),e&&t(ti),e&&t(fa),e&&t(ai),e&&t(da),e&&t(si),e&&t(w),e&&t(ni),e&&t(_e),e&&t(oi),e&&t(W),e&&t(ii),e&&t(ha),e&&t(li),e&&t(ka),e&&t(pi),e&&t(ma),e&&t(ri),e&&t(ft),e&&t(ci),e&&t(ya),e&&t(ui),e&&t(b),e&&t(fi),e&&t(Ea),e&&t(di),e&&t(Ta),e&&t(hi),e&&t(ki)}}}function Hh(dt){let d,g;const _=[dt[0],jd];let v={$$slots:{default:[Dh]},$$scope:{ctx:dt}};for(let h=0;h<_.length;h+=1)v=Zc(v,_[h]);return d=new Nh({props:v}),{c(){Ih(d.$$.fragment)},l(h){Gh(d.$$.fragment,h)},m(h,k){Lh(d,h,k),g=!0},p(h,[k]){const ht=k&1?Rh(_,[k&1&&Fd(h[0]),k&0&&Fd(jd)]):{};k&2&&(ht.$$scope={dirty:k,ctx:h}),d.$set(ht)},i(h){g||(Oh(d.$$.fragment,h),g=!0)},o(h){Wh(d.$$.fragment,h),g=!1},d(h){qh(d,h)}}}const jd={title:"First Party Experience",date:"2023-04-20",modifiedDate:"2023-04-20",categories:["cookies","analytics","web development"],svg:"Cookie",seoImage:"https://boatr.s3.amazonaws.com/static/media/uploads/blog/editor_blender.jpg",shortDescription:"We've created a mixture of game dev, playing games, and comedy Youtube channel for 3ee Games.  Our goal is to bring humorous and informative content to game developers, gamers, and folks that simply enjoy hearing a good story.",author:"3ee Games",menu:[{name:"First Party",icon:"\u{1F947}",url:"/blog/first-party-experience/#first-party-experience"},{name:"How we got here",icon:"\u{1F9D0}",url:"/blog/first-party-experience/#how-did-we-get-here"},{name:"Identity cookies",icon:"\u{1F36A}",url:"/blog/first-party-experience/#identify-all-cookies"},{name:"removing youtube",icon:"\u{1F4FA}",url:"/blog/first-party-experience/#replace-youtube-player"},{name:"replace google analytics",icon:"\u26C5",url:"/blog/first-party-experience/#replace-google-analytics"},{name:"LocalStorage",icon:"\u{1F6E1}\uFE0F",url:"/blog/first-party-experience/#from-cookies-to-localstorage"},{name:"cost of first party",icon:"\u{1F4B0}",url:"/blog/first-party-experience/#the-cost-of-first-party"}]};function Mh(dt,d,g){return dt.$$set=_=>{g(0,d=Zc(Zc({},d),Vd(_)))},d=Vd(d),[d]}class jh extends xh{constructor(d){super(),Sh(this,d,Mh,Hh,Ah,{})}}export{jh as default,jd as metadata};
